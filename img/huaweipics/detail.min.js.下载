ec.pkg("ec.product");ec.load("ajax");ec.load("ec.box",{loadType:"lazy"});ec.load("ec.index");ec.load("cloud-zoom",function(){setTimeout(function(){$("#product-img").CloudZoom()},200)});ec.load("ec.product.gift");ec.load("jquery.fixed",function(){$(function(){$("#pro-tab-all").fixed()})});ec.product.prefix="/product";ec.remark={};ec.remark.prefix=domainRemark+"/remark";ec.product.email=ec.util.escapeHtml(ec.account.email);ec.product.mobile=ec.util.escapeHtml(ec.account.mobile);var _skuForGetFeature={};(function(){var h=null,d=true,i={},b={},o={},j={},c=[],n=[],k={},r={},e={},l={},g,a={},m=function(){var s=$(this);s.parent().parent().addClass("current").siblings().removeClass("current");clearTimeout(g);g=setTimeout(function(){var t=s.attr("src");$("#product-img").attr("href",t.replace("55_55","800_800")).find("img").attr("src",t.replace("55_55","428_428"));$("#product-img").CloudZoom()},150)},f=function(){var u="\u60a8\u9009\u62e9\u4e86<b>";$("#pro-skus").find(".selected").each(function(){u+=$(this).children().children("a").attr("title")+"/"});var w=new String($("#extendProtected:has('.selected')>div.sku").text());var v=new String($("#accidentProtected:has('.selected')>div.sku").text());var t=w.indexOf("\u00a5");var s=v.indexOf("\u00a5");if(t>0){w=w.substr(0,t);u+=w+"/"}if(s>0){v=v.substr(0,s);u+=v+"/"}u=u.substring(0,u.length-1);u+="</b>";$("#pro-select-sku").html(u)};_updateSkuInfo=function(){var J=ec.product.getSku(),x;if(!J||h==J){return}ec.product.setSkuId=h=J;J=b[J];$("#pro-operation-msg").html("");ec.product.setType(J.type);if(J.priceMode!=2){J.price=parseFloat(J.price).toFixed(2)}if(parseInt(J.originPrice)!=parseInt(J.price)&&(J.priceMode!=2)){$("#pro-price-old").html("<label>\u534e&nbsp;\u4e3a&nbsp;&nbsp;\u4ef7\uff1a</label>&yen;&nbsp;"+J.originPrice);$("#pro-price-old").show();if(J.price>0){$("#pro-price").html("<label>\u73b0&nbsp;\u4ef7\uff1a</label><b>&yen;&nbsp;"+J.price+"</b>")}}else{$("#pro-price-old").hide();if(J.price>0){$("#pro-price").html("<label>\u534e&nbsp;\u4e3a&nbsp;&nbsp;\u4ef7\uff1a</label><b>&yen;&nbsp;"+J.price+"</b>")}}if(J.priceMode==2||J.price<=0){$("#pro-price").html("<label>\u534e&nbsp;\u4e3a&nbsp;&nbsp;\u4ef7\uff1a</label><b>\u6682\u65e0\u62a5\u4ef7</b>")}var G=[];if($.trim(J.skuPromWord).length>0){G.push(J.skuPromWord)}if($.trim(J.timerPromWord).length>0){if($.trim(J.timerPromLink4PC).length>0){x='<a href="'+J.timerPromLink4PC+'" target="_blank">'+J.timerPromWord+"</a>"}var B=ec.product.getSysDate();var A=J.timerPromStarttime;var L=new Date();L.setTime(A.parseDate("yyyy-MM-dd HH:mm:ss"));var v=J.timerPromEndtime;var w=new Date();w.setTime(v.parseDate("yyyy-MM-dd HH:mm:ss"));if((B-L)>=0&&(w-B)>=0){G.push(x||J.timerPromWord)}}if(0<G.length){$("#skuPromWord").html(G.join(" "));$("#skuPromWord").show()}else{$("#skuPromWord").hide()}$("#pro-sku-code").html(J.code);$("#pro-name").html(J.name);$("#bread-pro-name").html(J.name);ec.product.execute("renderInventory",[ec.product.inventory.haveInventory(J.id)]);$("#product-img").attr("href",ec.mediaPath+J.photoPath+"800_800_"+J.photoName).find("img").attr("src",ec.mediaPath+J.photoPath+"428_428_"+J.photoName);$("#product-img").CloudZoom();var G=[];G.push('<li class="current"><a href="javascript:;"><img src="'+ec.mediaPath+J.photoPath+"55_55_"+J.photoName+'" alt="'+J.name+'"/></a></li>');if(J.groupPhotoList){for(var P=0;P<J.groupPhotoList.length;P++){var Q=J.groupPhotoList[P];G.push('<li><a href="javascript:;"><img src="'+ec.mediaPath+Q.path+"/55_55_"+Q.name+'"  alt="'+J.name+'"/></a></li>')}ec.product.imgSlider.reset()}G=$(G.join(""));G.find("img").mouseover(m);$("#pro-gallerys").empty().html(G);G=[];var R=false,H=false;if(!J.promotionLst||J.promotionLst.length==0){$("#pro-promotions-list").html("");$("#pro-promotions-list").hide();$("#pro-promotions-area").hide()}else{for(var P=0;P<J.promotionLst.length;P++){G.push("<li>"+J.promotionLst[P].ruleDescription);if(J.promotionLst[P].isRealNameAuth=="1"){G.push('&nbsp;<a class="blue" href="/authmember/accesstoken" target="_blank">&nbsp;\u9650\u5b9e\u540d\u7528\u6237\u53c2\u52a0 ></a>')}G.push("</li>")}$("#pro-promotions-list").html(G.join(""));R=true;$("#pro-promotions-list").show();$("#pro-promotions-area").show()}if(J.groupType=="2"){R=true;G.push('<li id="promotionGroupTips">\u672c\u5546\u54c1\u6709\u5176\u4ed6\u56e2\u8d2d\u4f18\u60e0\u6d3b\u52a8\uff0c<a href="/group/detail-'+J.groupId+'" title="\u53bb\u770b\u770b" target="_blank">\u53bb\u770b\u770b</a></li>');$("#pro-promotions-list").html(G.join(""));$("#pro-promotions-list").show();$("#pro-promotions-area").show()}G=[];if(!J.giftList||J.giftList.length==0){H=false}else{H=true}if(H){$("#pro-parts-area").html(ec.product.gift.ftl(ec.product.getSku(),R));$("#pro-parts-area").show()}else{$("#pro-parts-area").hide()}if(J.prolongLst.length>0){var F;G=[];var S=[];var K=[];var s=[];var T=[];var t=0;var u=[];var M=[];var O=0;var N=0;var z=0;var I=[];var y=[];for(var P=0;P<J.prolongLst.length;P+=1){F=J.prolongLst[P];if(F.serviceType==1){s[t]=F.name;T[t]=F.id;I[t]=F.sbomCode;S[t]=F.productId;t+=1}if(F.serviceType==2){u[O]=F.name;M[O]=F.id;y[O]=F.sbomCode;K[O]=F.productId;O+=1}}$("#extendProtected").removeClass("selected");$("#accidentProtected").removeClass("selected");$("#extendProtected").find("ul").empty();$("#accidentProtected").find("ul").empty();if(t>0){$("#extendProtected").show();$("#extendProtectedProduct").show();$("#extendProtected>div.sku>a").html(s[0]);$("#extendProtected>div.sku>a").attr("id",S[0]);$("#extendProtectedProduct>div.pro-sku-tips>a").attr("id",S[0]);$("#extendProtectedProduct>div.pro-sku-tips>a").attr("href","/product/"+S[0]+".html");var D="";for(var P=0;P<t;P++){D=$('<li><div class="sku" data-scode="'+I[P]+'" title="'+T[P]+'" ><a id ="'+S[P]+'"href="javascript:;" title="\u5ef6\u4fdd\u670d\u52a1" >'+s[P]+"</a></div></li>");D.appendTo($("#extendProtected").find("ul"));if(s[P].length>N){N=s[P].length}}if(N>0){$("#extendProtected").find("div:eq(0)").css("width",((N-6)*12+64)+"px");$("#extendProtected>ul").find("div").attr("style","width:"+((N-6)*12+64)+"px")}}else{$("#extendProtected").hide();$("#extendProtectedProduct").hide()}if(O>0){$("#accidentProtected").show();$("#accidentProtectedProduct").show();$("#accidentProtected>div.sku>a").html(u[0]);$("#accidentProtected>div.sku>a").attr("id",K[0]);$("#accidentProtectedProduct>div.pro-sku-tips>a").attr("id",K[0]);$("#accidentProtectedProduct>div.pro-sku-tips>a").attr("href","/product/"+K[0]+".html");var E="";for(var P=0;P<O;P++){E=$('<li><div class="sku" data-scode="'+y[P]+'" title="'+M[P]+'"><a id="'+K[P]+'"href="javascript:;" title="\u610f\u5916\u4fdd\u670d\u52a1" >'+u[P]+"</a></div></li>");E.appendTo($("#accidentProtected").find("ul"));if(u[P].length>z){z=u[P].length}}if(z>0){$("#accidentProtected").find("div:eq(0)").css("width",((z-6)*12+64)+"px");$("#accidentProtected>ul").find("div").attr("style","width:"+((z-6)*12+64)+"px")}}else{$("#accidentProtected").hide();$("#accidentProtectedProduct").hide()}$("#extendProtected").hover(function(){$("#extendProtected").css("z-index","9")},function(){$("#extendProtected").css("z-index","3")});$("#accidentProtected").hover(function(){$("#accidentProtected").css("z-index","9")},function(){$("#accidentProtected").css("z-index","3")});$("#extendProtected div.sku,#accidentProtected div.sku").click(function(){if($(this).parent().hasClass("selected")){$(this).parent().removeClass("selected");$(this).next("ul").find("li").removeClass("selected")}if($(this).parent().parent().parent().is("#extendProtected")){var V=$(this).find("a").attr("id");$("#extendProtectedProduct>div.pro-sku-tips>a").attr("id",V);$("#extendProtectedProduct>div.pro-sku-tips>a").attr("href","/product/"+V+".html");var W=$(this).parent();W.addClass("selected");$(this).parent().siblings("li").not(W).removeClass("selected");$("#extendProtected>div.sku").html($(this).html());$("#extendProtected>div.sku").append("<i></i><s></s>");$("#extendProtected").addClass("selected")}if($(this).parent().parent().parent().is("#accidentProtected")){var V=$(this).find("a").attr("id");$("#accidentProtectedProduct>div.pro-sku-tips>a").attr("id",V);$("#accidentProtectedProduct>div.pro-sku-tips>a").attr("href","/product/"+V+".html");var U=$(this).parent();U.addClass("selected");$(this).parent().siblings("li").not(U).removeClass("selected");$("#accidentProtected>div.sku").html($(this).html());$("#accidentProtected>div.sku").append("<i></i><s></s>");$("#accidentProtected").addClass("selected")}f()});$(".pro-ew-area").show()}else{$(".pro-ew-area").hide();var C=$("#extendProtected div.sku,#accidentProtected div.sku");if($(C).parent().hasClass("selected")){$(C).parent().removeClass("selected");$(C).next("ul").find("li").removeClass("selected")}}f();ec.product.initContract(J);$("#integral").html(J.integral);ec.product.renderGroup(h);$("#pro-tab-feature").siblings().removeClass("current");$("#pro-tab-feature").addClass("current");$("#pro-tab-feature-content").show().siblings().hide();ec.product.tabSkuInfo(h);$("#pro-quantity-area").show();$("#pro-operation").css("visibility","visible");$("#stock-area-id").show();$("#stock-area-id-nochange").hide();if(ec.product.productType==4){ec.product.depositActivity(ec.product.getSku())}else{if($("#pro-tab-parameter").attr("data-skulist-rushbuy")){ec.product.rushbuyActivity()}}var J=ec.product.getSku();J=ec.product.getSkuInfo(J);ec.product.getFeature(J.id);ec.product.processSupportDisplayDilieryTime(J);ec.product.queryPointWeight(ec.product.setSkuId||ec.product.defaultSku)};ec.product.tabSkuInfo=function(s){$("#pro-tab-feature-content-"+s+", #pro-tab-parameter-content-"+s+", #pro-tab-package-content-"+s+", #pro-tab-service-content-"+s).show().siblings().hide();$("#comb-pro-area").find(".selected").each(function(){$(this).removeClass("selected")});$("#comb-count").html("0");var u=parseInt($("#comb-count").html(),10)&&0;var v=ec.product.getSkuInfo(s);var t=parseFloat(v.price);if(!(ec.product.productType&&ec.product.productType==4&&ec.product.isDespositSku==1)){$("#comb-price-label").html("\u7ec4\u5408\u4ef7\uff1a&yen;");$("#comb-price").html(t.toFixed(2))}$("#combList-list-"+s).show().siblings().hide();if(!($("#combList-list-"+s).children().eq(0).hasClass("current"))){$("#combList-list-"+s).children().eq(0).addClass("current").siblings().removeClass("current")}};ec.product.addSkuAttr=function(s,v,t,w,x){var z=b[s];if(!z){b[s]={attrIds:[w]}}else{z.attrIds.push(w)}j[w]=s;var y=k[t];if(!y){n.push(t);c.push(v);k[t]=[x]}else{if(y.indexOf(x)==-1){y.push(x)}}var u=r[v+"-"+x];if(!u){r[v+"-"+x]=[w]}else{u.push(w)}if(!l[x]){l[x]=[]}l[x].push(s)};ec.product.setSku=function(s,t){t=t||{};t.id=s;$.extend((b[s]||(b[s]={})),t)};ec.product.getSku=function(){var s;$.each(e,function(){if(!s){s=this;return}var w=this,v=[];for(var u=0;u<s.length;u++){for(var t=0;t<w.length;t++){if(s[u]==w[t]){v.push(s[u])}}}s=v});if(!s||s.length!=1){return(h||ec.product.defaultSku)}return s[0]};ec.product.getSkuInfo=function(s){return b[s]};ec.product.setSkuForParement=function(s){i[s]=s};ec.product.getSkuForParement=function(s){return i[s]};ec.product.setSkuForFeature=function(s){_skuForGetFeature[s]=s};ec.product.getSkuForFeature=function(s){return _skuForGetFeature[s]};ec.product.setSkuShowType=function(s,t){o[s]=t};ec.product.setSkuPriority=function(s){a[s]=true};ec.product.getSkuPriority=function(s){return a[s]};ec.product.selectBySku=function(s){var t=b[s];if(!t||!t.attrIds){if(t.priceMode!=2){t.price=parseFloat(t.price).toFixed(2)}if(parseInt(t.originPrice)!=parseInt(t.price)&&(t.priceMode!=2)){$("#pro-price-old").html("<label>\u534e&nbsp;\u4e3a&nbsp;&nbsp;\u4ef7\uff1a</label>&yen;&nbsp;"+t.originPrice);$("#pro-price-old").show();if(t.price>0){$("#pro-price").html("<label>\u73b0&nbsp;\u4ef7\uff1a</label><b>&yen;&nbsp;"+t.price+"</b>")}}else{$("#pro-price-old").hide();if(t.price>0){$("#pro-price").html("<label>\u534e&nbsp;\u4e3a&nbsp;&nbsp;\u4ef7\uff1a</label><b>&yen;&nbsp;"+t.price+"</b>")}}$("#pro-quantity-area").show();$("#pro-operation").css("visibility","visible");$("#stock-area-id").show();$("#stock-area-id-nochange").hide();if(ec.product.productType==4){ec.product.depositActivity(s)}else{if($("#pro-tab-parameter").attr("data-skulist-rushbuy")){ec.product.rushbuyActivity()}}ec.product.processSupportDisplayDilieryTime(t);return}$("#pro-skus").find(".attr"+t.attrIds.join(",.attr")).children(".sku").trigger("click")};ec.product.queryPointWeight=function(s){var t=b[s];if(t||t.code){if(ec.product.productType==1||ec.product.productType==2||ec.product.productType==5||ec.product.productType==6){return}if(ec.product.seCode!="VMALL-HUAWEIDEVICE"){return}if(t.contractList&&t.contractList.length>0){return}$.ajax({url:$("#domainUc").val()+"/point/queryPointWeight.json?sbomCode="+t.code,dataType:"jsonp",timeout:10000,success:function(w){var v=1;if(w.resultCode=="200"){if(w.pointWeightMap!=null){for(var u in w.pointWeightMap){if(w.pointWeightMap[u]!=null){v=w.pointWeightMap[u]}}}}$("div").remove(".buy-points");if(v==0){}else{if(v==1){$("#support").append('<div class="buy-points"><s></s><span>\u8d2d\u4e70\u9001\u79ef\u5206</span></div>')}else{$("#support").append('<div class="buy-points"><s></s><span>\u6d3b\u52a8\u9001\u79ef\u5206</span></div>')}}}})}};ec.ready(function(){ec.product.hiddenTips();var A=[],x,F,H,s;for(var G=0;G<n.length;G++){x=c[G];s=(o[x]=="2");F=n[G];A.push('<dl class="clearfix '+(s?"pro-sku-text":"pro-sku-img")+'"><dt>\u9009\u62e9'+F+"\uff1a</dt><dd><ol>");var t=k[F];for(var E=0;E<t.length;E++){H=r[x+"-"+t[E]];A.push('<li class="tac pointer attr'+H.join(" attr")+'" data-attrName="'+F+'" data-attrId="'+H.join(",")+'" data-skuId="'+l[t[E]].join(",")+'"><div class="sku"> <a title="'+t[E]+'">');if(s){A.push(t[E]);A.push("</a><s></s>")}else{var B=b[j[H[0]]];A.push('<img src="'+ec.mediaPath+B.photoPath+"40_40_"+B.photoName+'" alt="'+t[E]+'"/>');A.push("</a><s></s>"+t[E])}A.push("</div></li>")}A.push("</ol></dd></dl>")}var y=$(A.join(""));var z=function(M,O){var P=O.attr("data-skuId");var K=false;for(var L=0,N=M.length;L<N;L++){if(P.indexOf(M[L]+"")>-1){K=true;break}}return K};var J=function(L){var N=[];var K=true;var M=null;$.each(L.find("li.selected"),function(){var U=$(this);var Q=U.find("a").attr("title");var R=U.closest("dl").next().find("li");if(K){N=l[Q];$.each(R,function(){var V=$(this);if(!z(N,V)){V.addClass("disabled").removeClass("selected")}else{V.removeClass("disabled")}});K=false;M=(h||ec.product.defaultSku);return}var S=[];var T=l[Q];for(var P=0;P<N.length;P++){for(var O=0;O<T.length;O++){if(N[P]==T[O]){S.push(N[P])}}}N=S;if(N.length!=1){M=(h||ec.product.defaultSku);if(N.length>1){$.each(R,function(){var V=$(this);if(!z(N,V)){V.addClass("disabled").removeClass("selected")}else{V.removeClass("disabled")}})}}else{$.each(R,function(){var V=$(this);if(!z(N,V)){V.addClass("disabled").removeClass("selected")}else{V.removeClass("disabled")}});M=N[0]}});return M};y.find(".sku").click(function(){var Q=$(this).parent();if(Q.hasClass("disabled")){return false}var R=Q.attr("data-attrId").split(","),N=Q.attr("data-attrName"),L=[];for(var M=0;M<R.length;M++){L.push(j[R[M]])}e[N]=L;Q.addClass("selected").siblings().removeClass("selected");var P=J(y);var O=null;var K=true;$.each(y.find("ol"),function(){var S=$(this);if(1!=S.find("li.selected").length){O=S.find("li").not(S.find("li.disabled")).first();if(O.length>=1){K=false;return false}}});if(K){B=b[P];f();_updateSkuInfo();d=false}else{if(O){if(!d){$(O).find(".sku").trigger("click")}}}});if($(".hot-area").find("li").size()==0){$(".hot-area").hide();$("#pro-seg-hot").hide()}$("#pro-skus").html(y);ec.product.selectBySku(ec.product.setSkuId||ec.product.defaultSku);var C=ec.product.setSkuId||ec.product.defaultSku,D,v=false,u=false;D=ec.product.getSkuInfo(C);if(!D.promotionLst||D.promotionLst.length==0){v=false}else{v=true}if(!D.giftList||D.giftList.length==0){u=false}else{u=true}if(!v){$("#pro-promotions-list").html("");$("#pro-promotions-list").hide();$("#pro-promotions-area").hide()}if(u){$("#pro-parts-area").html(ec.product.gift.ftl(C,v));$("#pro-parts-area").show()}else{$("#pro-parts-area").hide()}$("#pro-gallerys").find("img").mouseover(m);var w=getUrlParaMap4CartBinding();var I=w.isSuccess;if(null!=I&&"0"==I){bindCartResult("ec-binding-phone")}$("#address").hover(function(){var K=ec.product.getSku();K=ec.product.getSkuInfo(K);ec.product.processAddress(K)},function(){})})})();ec.product.disableAddCartButtons=function(){$("#pro-operation a.button-add-cart").each(function(){$(this).removeClass("button-style-1").addClass("button-style-disabled-1");this.backup=this.onclick;this.onclick=""});$("#pro-operation a.button-book-2").each(function(){$(this).removeClass("button-style-2").addClass("button-style-disabled-2");this.backup=this.onclick;this.onclick=""});$("a.button-add-cart-2, a.button-add-cart-3").each(function(){$(this).removeClass("button-style-1").addClass("button-style-disabled-2");this.backup=this.onclick;this.onclick=""})};ec.product.enableAddCartButtons=function(){$("#pro-operation a.button-add-cart").each(function(){$(this).removeClass("button-style-disabled-1").addClass("button-style-1").css("background-position-y","8px");this.onclick=this.backup;this.backup=""});$("#pro-operation a.button-book-2").each(function(){$(this).removeClass("button-style-disabled-2").addClass("button-style-2");this.onclick=this.backup;this.backup=""});$("a.button-add-cart-2, a.button-add-cart-3").each(function(){$(this).removeClass("button-style-disabled-2").addClass("button-style-1");this.onclick=this.backup;this.backup=""})};ec.product.addCart=function(){var o=$("#pro-skus").find("dl");for(p=0;p<o.length;p++){var w=false;var j=o.get(p);var h=$(j).children("dd").get(0);var g=$(h).children("ol").get(0);var f=$(g).children("li");if(null!=f){for(q=0;q<f.length;q++){if($(f.get(q)).hasClass("selected")){w=true}}}if(!w){alert("\u8bf7\u9009\u62e9\u9700\u8981\u8d2d\u4e70\u7684\u7c7b\u578b");return false}}ec.product.disableAddCartButtons();var c;var r=[];var n=[];var m=[];var t=[];r[0]=ec.product.getSku();n[0]="";var e=$("ul>li.selected>div.sku");for(var x=0;x<e.length;x++){r[x+1]=$(e[x]).attr("title")}m[0]=1;t[0]=$("#pro-quantity").val();if($("#extendProtected").hasClass("selected")){m[1]=6;t[1]=$("#pro-quantity").val();n[1]=ec.product.getSku();if($("#accidentProtected").hasClass("selected")){m[2]=7;t[2]=$("#pro-quantity").val();n[2]=ec.product.getSku()}}else{if($("#accidentProtected").hasClass("selected")){m[1]=7;t[1]=$("#pro-quantity").val();n[1]=ec.product.getSku()}}var y=ec.product.gift.finalMainSbomGiftMap[r[0]];var s=[];var a="";var d=[];if(y){for(var C in y){s.push(y[C].giftSkuId);var v={sbomCode:y[C].giftSkuCode};d.push(v)}a=s.join("-")}c={skuIds:r,extendSkuIds:n,quantity:t,type:m,gifts:a};var k=[];var A={};A.itemId=$("#pro-sku-code").html();A.qty=$("#pro-quantity").val();A.itemType="S0";A.gifts=d;k.push(A);var B=[];var l=$("ul>li.selected>div.sku");for(var x=0;x<l.length;x++){B[x]=$(l[x]).attr("data-scode")}var u={};var z={};if($("#extendProtected").hasClass("selected")){u.itemId=B[0];u.qty=$("#pro-quantity").val();u.itemType="S1";u.itemProp={main_skucode:$("#pro-sku-code").html()};k.push(u);if($("#accidentProtected").hasClass("selected")){z.itemId=B[1];z.qty=$("#pro-quantity").val();z.itemType="S6";z.itemProp={main_skucode:$("#pro-sku-code").html()};k.push(z)}}else{if($("#accidentProtected").hasClass("selected")){z.itemId=B[0];z.qty=$("#pro-quantity").val();z.itemType="S6";z.itemProp={main_skucode:$("#pro-sku-code").html()};k.push(z)}}var b=ec.lang.json.stringify(k);ec.cart.add(c,{successFunction:function(i){ec.cart.getMicroCartBaseInfo(i.cart,function(E){if(E.success){var D=E.cartInfo;$("#cart-tips").show();$("#cart-total, #header-cart-total").html(D.totalNumber);$("#cart-price").html("&yen;&nbsp;"+D.totalPrice.toFixed(2))}else{$("#cart-tips").show();$("#cart-tips .pro-add-success-total").hide()}});ec.product.enableAddCartButtons()},errorFunction:function(i){$("#popup-tips-msg").html(i.msg);$("#popup-tips").show();ec.product.enableAddCartButtons()}},b)};ec.product.orderNowCover=function(){ec.account.afterLogin(function(){var h=$("#pro-skus").find("dl");for(p=0;p<h.length;p++){var n=false;var o=h.get(p);var m=$(o).children("dd").get(0);var k=$(m).children("ol").get(0);var j=$(k).children("li");if(null!=j){for(q=0;q<j.length;q++){if($(j.get(q)).hasClass("selected")){n=true}}}if(!n){alert("\u8bf7\u9009\u62e9\u9700\u8981\u8d2d\u4e70\u7684\u7c7b\u578b");return false}}ec.product.disableAddCartButtons();var l;var d;var c;var g;var f=[];l=ec.product.getSku();l=$("#pro-sku-code").html();d=$("#pro-quantity").val();var a=$("ul>li.selected>div.sku");for(var e=0;e<a.length;e++){f[e]=$(a[e]).attr("title")}if($("#extendProtected").hasClass("selected")){c=f[0];if($("#accidentProtected").hasClass("selected")){g=f[1]}}else{if($("#accidentProtected").hasClass("selected")){g=f[0]}}var r="";r='<input name="sbomCode" type="text" value="'+l+'">';r+='<input name="quantity" type="text" value="'+d+'">';if(c){r+='<input name="extendServiceSKU" type="text" value="'+c+'">'}if(g){r+='<input name="exceptionServiceSKU" type="text" value="'+g+'">'}r+='<input name="state" type="text" value="0">';var b=gid("order-cover-form");b.innerHTML=r;ec.binding.isBindedMobileOrEnterpriseUser(function(){setTimeout(function(){b.action=domainMain+"/uidesign/edit";b.submit()},500)})})};ec.product.orderNow=function(){ec.account.afterLogin(function(){var l=$("#pro-skus").find("dl");for(p=0;p<l.length;p++){var n=false;var g=l.get(p);var f=$(g).children("dd").get(0);var e=$(f).children("ol").get(0);var d=$(e).children("li");if(null!=d){for(q=0;q<d.length;q++){if($(d.get(q)).hasClass("selected")){n=true}}}if(!n){alert("\u8bf7\u9009\u62e9\u9700\u8981\u8d2d\u4e70\u7684\u7c7b\u578b");return false}}ec.product.disableAddCartButtons();var h=[];var u={};u.itemId=$("#pro-sku-code").html();u.qty=$("#pro-quantity").val();u.itemType="S0";var s=ec.product.gift.finalMainSbomGiftMap[ec.product.getSku()];if(s){var c=[];for(var w in s){var r={sbomCode:s[w].giftSkuCode};c.push(r)}u.gifts=c}h.push(u);var v=[];var j=$("ul>li.selected>div.sku");for(var o=0;o<j.length;o++){v[o]=$(j[o]).attr("data-scode")}var m={};var t={};if($("#extendProtected").hasClass("selected")){m.itemId=v[0];m.qty=$("#pro-quantity").val();m.itemType="S1";m.itemProp={main_skucode:$("#pro-sku-code").html()};h.push(m);if($("#accidentProtected").hasClass("selected")){t.itemId=v[1];t.qty=$("#pro-quantity").val();t.itemType="S6";t.itemProp={main_skucode:$("#pro-sku-code").html()};h.push(t)}}else{if($("#accidentProtected").hasClass("selected")){t.itemId=v[0];t.qty=$("#pro-quantity").val();t.itemType="S6";t.itemProp={main_skucode:$("#pro-sku-code").html()};h.push(t)}}var b=ec.lang.json.stringify(h);var k="";k+='<input name="orderReqJson" type="text" value=\''+b+"'>";k+='<input name="state" type="text" value="0">';var a=gid("order-confirm-form");a.innerHTML=k;ec.binding.isBindedMobileOrEnterpriseUser(function(){setTimeout(function(){a.submit()},500)})})};ec.product.addCartWithLogin=function(){ec.account.afterLogin(ec.product.addCart)};ec.product.buyBundle=function(c){ec.product.disableAddCartButtons();var b={skuIds:[c],quantity:[1],type:[2]};var a='[{"itemId":'+c+',"qty":1,"itemType":"B"}]';ec.cart.add(b,{successFunction:function(d){ec.product.enableAddCartButtons();$("#order-shoppingCart-form").submit()},errorFunction:function(d){ec.product.enableAddCartButtons();alert(d.msg)}},a)};ec.product.buyComb=function(){var d=[];var a=ec.product.getSku(),c=[a],b=[1],f=[1],e=$("#isPriority").val();var g={};g.itemId=$("#pro-sku-code").html();g.qty=1;g.itemType="S0";d.push(g);$('[id="comb-pro-'+a+'"]').find("input[name=skuId]:checked").each(function(){c.push(this.value);b.push(1);f.push(1);var j={};j.itemId=$(this).attr("data-scode");j.qty=1;j.itemType="S0";d.push(j)});var i={skuIds:c,quantity:b,type:f};if(e==1){if(ec.product.getSkuPriority(a)==true){return ec.product.buy("sku",c)}}$("#order-confirm-form").attr({action:"/order/nowConfirmcart",method:"post"});ec.product.disableAddCartButtons();var h=ec.lang.json.stringify(d);ec.cart.add(i,{successFunction:function(j){ec.product.enableAddCartButtons();$("#order-shoppingCart-form").submit()},errorFunction:function(j){ec.product.enableAddCartButtons();alert(j.msg)}},h)};ec.product.buy=function(a,b){_paq.push(["trackLink","\u7acb\u5373\u8d2d\u4e70","link"," "]);ec.code.addAnalytics({hicloud:true});ec.account.afterLogin(function(){var i="";if(a=="sku"){var g=[];var h={};h.itemId=$("#pro-sku-code").html();h.qty=1;h.itemType="S0";var e=ec.product.gift.finalMainSbomGiftMap[ec.product.getSku()];if(e){var d=[];for(var j in e){var f={sbomCode:e[j].giftSkuCode};d.push(f)}h.gifts=d}g.push(h);var k=ec.lang.json.stringify(g);i='<input name="orderReqJson" type="text" value=\''+k+"'>"}var c=gid("order-confirm-form");c.innerHTML=i;ec.binding.isBindedMobileOrEnterpriseUser(function(){setTimeout(function(){c.submit()},500)})})};ec.product.timingBuy=function(){var c=ec.product.getSkuInfo(ec.product.getSku()||ec.product.defaultSku);var d=ec.product.getSysDate();var a=c.startTime;var b=new Date();b.setTime(a.parseDate("yyyy-MM-dd HH:mm:ss"));var i=[];i.push(a);var j=c.countDown;$("#pro-operation").css("visibility","visible");if((d-b)>=0){var e=c.endTime;var f=new Date();if(null==e||""==e){f=new Date(2999,1,1,0,0,0)}else{f.setTime(e.parseDate("yyyy-MM-dd HH:mm:ss"))}if((d-f)<0){var h=ec.product.inventory.haveInventory(c.id);if(h){var g='<a href="javascript:;" onclick="ec.product.addCart()" class="button-add-cart button-style-1" title="\u52a0\u5165\u8d2d\u7269\u8f66"><span>\u52a0\u5165\u8d2d\u7269\u8f66</span></a><a href="javascript:;" onclick="ec.product.orderNow()" class="button-book-2 button-style-2"  title="\u7acb\u5373\u4e0b\u5355"><span>\u7acb\u5373\u4e0b\u5355</span></a>';$("#pro-operation").html(g)}else{$("#pro-operation").html('<a href="javascript:;" class="button-notice-arrival button-style-2" title="\u5230\u8d27\u901a\u77e5" onclick="ec.product.arrival()"><span>\u5230\u8d27\u901a\u77e5</span></a>')}}else{$("#pro-operation").html('<a href="javascript:;" class="button-style-disabled-1 button-event-disabled">\u6d3b\u52a8\u5df2\u7ed3\u675f</a>');$("#pro-operation").css("visibility","visible")}}else{if(!ec.util.isEmpty(c.gotoUrl)&&((b-d)/(1000*3600)>j)){if(1==c.isShowReminder){$("#pro-operation").html('<a target="_blank" href="'+c.gotoUrl+'" class="button-style-2 button-sellRemind" title="\u5f00\u552e\u63d0\u9192"><span>\u5f00\u552e\u63d0\u9192</span></a>')}else{if(0==c.isShowReminder){var g='<a href="javascript:;" class="button-style-disabled-1 button-add-cart-disabled" title="\u52a0\u5165\u8d2d\u7269\u8f66"><span>\u52a0\u5165\u8d2d\u7269\u8f66</span></a><a href="javascript:;"  class="button-book-2 button-style-disabled-2"  title="\u7acb\u5373\u4e0b\u5355"><span>\u7acb\u5373\u4e0b\u5355</span></a><div class="countdown-end-area"></div>';$("#pro-operation").html(g);ec.ui.countdown($(".countdown-end-area"),{html:"<s>\u8ddd\u79bb\u6d3b\u52a8\u5f00\u59cb\u8fd8\u6709:	</s><b>{#day}</b>\u5929<b>{#hours}</b>\u5c0f\u65f6<b>{#minutes}</b>\u5206<b>{#seconds}</b>\u79d2",now:d,times:i,callback:function(k){var l='<a href="javascript:;" onclick="ec.product.addCart()" class="button-add-cart button-style-1" title="\u52a0\u5165\u8d2d\u7269\u8f66"><span>\u52a0\u5165\u8d2d\u7269\u8f66</span></a><a href="javascript:;" onclick="ec.product.orderNow()" class="button-book-2 button-style-2"  title="\u7acb\u5373\u4e0b\u5355"><span>\u7acb\u5373\u4e0b\u5355</span></a>';$("#pro-operation").html(l)}})}}}else{var g='<a href="javascript:;" class="button-style-disabled-1 button-add-cart-disabled" title="\u52a0\u5165\u8d2d\u7269\u8f66"><span>\u52a0\u5165\u8d2d\u7269\u8f66</span></a><a href="javascript:;"  class="button-book-2 button-style-disabled-2"  title="\u7acb\u5373\u4e0b\u5355"><span>\u7acb\u5373\u4e0b\u5355</span></a><div class="countdown-end-area"></div>';$("#pro-operation").html(g);ec.ui.countdown($(".countdown-end-area"),{html:"<s>\u8ddd\u79bb\u6d3b\u52a8\u5f00\u59cb\u8fd8\u6709:	</s><b>{#day}</b>\u5929<b>{#hours}</b>\u5c0f\u65f6<b>{#minutes}</b>\u5206<b>{#seconds}</b>\u79d2",now:d,times:i,callback:function(k){var l='<a href="javascript:;" onclick="ec.product.addCart()" class="button-add-cart button-style-1" title="\u52a0\u5165\u8d2d\u7269\u8f66"><span>\u52a0\u5165\u8d2d\u7269\u8f66</span></a><a href="javascript:;" onclick="ec.product.orderNow()" class="button-book-2 button-style-2"  title="\u7acb\u5373\u4e0b\u5355"><span>\u7acb\u5373\u4e0b\u5355</span></a>';$("#pro-operation").html(l)}})}}};ec.product.arrival=function(){ec.account.afterLogin(function(){ec.product.syncCustomSession();var b=ec.product.email;var a=ec.product.mobile;var d="";var c=new ec.box($("#product-arrival-html").val(),{boxid:"product-arriva-box",boxclass:"ol_box_4",title:"\u5230\u8d27\u901a\u77e5",showButton:false,onopen:function(e){if(ec.util.isEmpty(b)){$("#arrival-email").attr("class","disabled");$("#account-email").html('\u672a\u7ed1\u5b9a\u5b89\u5168\u90ae\u7bb1&nbsp;<a href="/member/account" target="_blank" onclick="ec.product.bind()">\u53bb\u7ed1\u5b9a</a>')}else{$("#arrival-email").bind("click",function(){d=ec.product.chooseNoticeType("email")});$("#account-email").html(b)}if(ec.util.isEmpty(a)){$("#arrival-mobile").attr("class","disabled");$("#account-mobile").html('\u672a\u7ed1\u5b9a\u5b89\u5168\u624b\u673a&nbsp;<a href="/member/account" target="_blank" onclick="ec.product.bind()">\u53bb\u7ed1\u5b9a</a>')}else{$("#arrival-mobile").bind("click",function(){d=ec.product.chooseNoticeType("mobile")});$("#account-mobile").html(ec.product.splitMobile(a))}},onok:function(g){if(d.length==0){$("#arrival-error span").html("\u8bf7\u9009\u62e9\u4e00\u79cd\u901a\u77e5\u65b9\u5f0f\uff01");$("#arrival-error").removeClass("hide");return}var f="1";var e=b;if(d=="mobile"){f="3";e=a}new ec.ajax().submit({url:"/product/arrivalMail.json",data:{informWay:e,type:f,skuId:ec.product.getSku()},timeout:10000,timeoutFunction:function(){$("#arrival-error span").html("\u64cd\u4f5c\u8d85\u65f6\uff0c\u8bf7\u91cd\u8bd5\uff01");$("#arrival-error").removeClass("hide")},beforeSendFunction:ec.ui.loading.show,afterSendFunction:ec.ui.loading.hide,successFunction:function(h){if(!h.success){$("#arrival-error span").html(h.msg);$("#arrival-error").removeClass("hide");return}alert("\u8bbe\u7f6e\u6210\u529f\uff01");$("#arrival-error").addClass("hide");g.close();$(".ol_box_mask").remove()}})},onclose:function(e){$(".ol_box_mask").remove()}});c.open();ec.product.bind=function(){c.close();$(".ol_box_mask").remove()}})};ec.product.chooseNoticeType=function(a){$("#arrival-email").removeClass("selected");$("#arrival-mobile").removeClass("selected");$("#arrival-"+a).attr("class","selected");return a};ec.product.attention=function(){var a=new ec.box($("#product-attention-html").val(),{boxid:"product-attention-box",title:"\u5173\u6ce8\u5546\u54c1",width:580,focus:"input[name=email]",showButton:false,onok:function(e){var d=e.find("input[name=email]").val(),c=e.find("input[name=mobile]").val(),b=/^0?(13|14|15|17|18)[0-9]{9}$/;if(!d){alert("\u8bf7\u8f93\u5165email\uff01");return}if(!ec.util.isEmail(d)){alert("\u8bf7\u8f93\u5165\u6b63\u786e\u7684email\uff01");return}if(!c){alert("\u8bf7\u8f93\u5165\u624b\u673a\u53f7\u7801\uff01");return}if(!b.test(c)){alert("\u8bf7\u8f93\u5165\u6b63\u786e\u7684\u624b\u673a\u53f7\u7801\uff01");return}new ec.ajax().submit({url:"/product/saveAttention.json",data:{email:d,phone:c,skuId:ec.product.getSku()},timeout:10000,timeoutFunction:function(){alert("\u64cd\u4f5c\u8d85\u65f6\uff0c\u8bf7\u91cd\u8bd5\uff01")},beforeSendFunction:ec.ui.loading.show,afterSendFunction:ec.ui.loading.hide,successFunction:function(f){if(!f.success){ec.showError(f);return}alert("\u8bbe\u7f6e\u6210\u529f\uff01");e.close()}})}});a.open();a.find("input[name=email]").focus()};ec.product.checkExtend=function(){var a=ec.product.getSku();val=$.trim($("#extend-text").val()),$succussMsg=$("#extend-msg-succuss"),$errorMsg=$("#extend-msg-error"),msgText='<span class="fcn">*</span>&nbsp;',link="";if(val.length>5){new ec.ajax().get({url:"/tcs/query.json?_t="+(new Date()).getTime()+"&skuId="+a+"&imei="+val,timeout:10000,timeoutFunction:function(){$("#pro-extend-result-id").removeClass("hide");$errorMsg.html(msgText+"\u64cd\u4f5c\u8d85\u65f6\uff0c\u8bf7\u91cd\u8bd5\uff01").show();$succussMsg.hide()},beforeSendFunction:function(){ec.ui.loading.show({modal:false})},afterSendFunction:ec.ui.loading.hide,successFunction:function(b){if(!b.success){if(b.otherPrdId){link='&nbsp;&nbsp;<a href="/product/'+b.otherPrdId+".html#"+b.otherSkuId+',0">\u524d\u53bb\u8d2d\u4e70>></a>'}$("#pro-extend-result-id").removeClass("hide");$errorMsg.html(msgText+b.msg+link).show();$succussMsg.hide();$("#button-extend").attr("class","button-style-disabled-1 button-go-extend-checkout-disabled");return}$("#pro-extend-result-id").removeClass("hide");$succussMsg.html(msgText+b.msg).show();$errorMsg.hide();$("#button-extend").attr("class","button-style-1 button-go-extend-checkout")}})}else{$succussMsg.hide();$("#pro-extend-result-id").removeClass("hide");$errorMsg.html(msgText+"\u8bf7\u8f93\u5165\u6b63\u786e\u7684IMEI/SN/MEID\u4fe1\u606f").show();$("#button-extend").attr("class","button-style-disabled-1 button-go-extend-checkout-disabled")}return false};ec.product.extendBuyNow=function(){_paq.push(["trackLink","\u5ef6\u4fdd\u5546\u54c1 - \u7acb\u5373\u8d2d\u4e70","link"," "]);ec.code.addAnalytics({hicloud:true});$("#extend-text").val("");$("#extend-msg-succuss,#extend-msg-error").hide();$("#button-extend")[0].className="button-style-disabled-1 button-go-extend-checkout-disabled";$("#popup-extend").show()};ec.product.extendBuy=function(b){_paq.push(["trackLink","\u5ef6\u4fdd\u5546\u54c1 - \u63d0\u4ea4\u8ba2\u5355","link"," "]);ec.code.addAnalytics({hicloud:true});var a=$.trim($("#extend-text").val());if(b.className!="button-style-1 button-go-extend-checkout"||!a){return}ec.account.afterLogin(function(){var f=ec.product.getSku(),c="",e=gid("order-confirm-extend-form");if(!ec.util.isArray(f)){f=[f]}for(var d=0;d<f.length;d++){c+='<input name="skuIds" type="text" value="'+f[d]+'">'}c+='<input name="imei" type="text" value="'+a+'">';e.innerHTML=c;ec.binding.isBindedMobileOrEnterpriseUser(function(){setTimeout(function(){e.submit()},500)})})};ec.product.initContract=function(d){if(d.contractList.length>0){var a,b;html=[];for(var c=0;c<d.contractList.length;c+=1){a=d.contractList[c];html.push('<li data-id="'+a.id+'"> <div class="sku"><a title="'+a.name+'" href="javascript:;">'+a.name+"</a><s></s></div ></li>")}b=$("<ol>"+html.join("")+"</ol>");$(".sku",b).click(function(){$(this).parent().toggleClass("selected").siblings().removeClass("selected")});$("#contractList-ol").html(b);$("#contractLst").show();$("#contractLst .sku").unbind("click").click(function(){$(this).parent().toggleClass("selected").siblings().removeClass("selected");var j=$("#pro-quantity-area"),f=$("#contractLst li.selected"),i=$("#pro-operation"),h=$("#contractForm"),e,k;ec.product.addCartBtn=ec.product.addCartBtn||i.html();e=ec.product.getSku();k=ec.product.inventory.haveInventory(e);if(ec.product.status==3){ec.product.execute("renderInventory",[k]);j.show()}else{if(f.length>0&&k){j.hide();i.html($('<a title="\u7acb\u5373\u8d2d\u4e70" class="button-buy button-style-1" href="javascript:;"><span>\u7acb\u5373\u8d2d\u4e70</span></a>').click(function(){_paq.push(["trackLink","\u5408\u7ea6\u673a-\u7acb\u5373\u8d2d\u4e70","link"," "]);ec.code.addAnalytics({hicloud:true});setTimeout(function(){var l=h.attr("action");h.attr("action",l.replace("{id}",f.attr("data-id"))).submit()},200)})).css("visibility","visible")}else{if(f.length>0&&!k){var g=$("#pro-operation");$("#pro-quantity-area").hide();g.css("visibility","visible");g.html('<a href="javascript:;" class="button-notice-arrival button-style-2" title="\u5230\u8d27\u901a\u77e5" onclick="ec.product.arrival()"><span>\u5230\u8d27\u901a\u77e5</span></a>');$("#tab-notice-button").show();j.show()}else{ec.product.execute("renderInventory",[k]);j.show()}}}});$("#contractLst .sku").eq(0).click()}else{$("#contractLst").hide()}};ec.product.jmptoRemark=function(){$("#pro-tab-evaluate").click();ec.ui.scrollTo("#pro-tab-evaluate")};ec.product.combClick=function(a){if($(a).hasClass("selected")==false){$(a).addClass("selected");$(a).children("input").attr("checked",true)}else{$(a).removeClass("selected");$(a).children("input").attr("checked",false)}var b=$(a).children("input");count=parseInt($("#comb-count").html(),10)||0,price=parseFloat($("#comb-price").html())||0;if(b.attr("checked")==true){price+=parseFloat(b.attr("data-price"));count++}else{price-=parseFloat(b.attr("data-price"));count--}if(!(ec.product.productType&&ec.product.productType==4&&ec.product.isDespositSku==1)){$("#comb-price").html(price.toFixed(2))}$("#comb-count").html(count)};(function(){var a=0,b;ec.ready(function(){b=$("#pro-gallerys").css("left","0").children().length});ec.product.imgSlider={prev:function(){if(a==0){return}a--;$("#pro-gallerys").animate({left:a*-90},100)},next:function(){if(a+5>=b){return}a++;$("#pro-gallerys").animate({left:a*-90},100)},reset:function(){b=$("#pro-gallerys").css("left","0").children().length;a=0}}})();(function(c){var b,a=function(d){var e=$("#comb-pro-"+d);var g=c.getSkuInfo(d),f=parseFloat(g.price);e.find("input[name=skuId]:checked").each(function(){f+=parseFloat(this.getAttribute("data-price"))});if(!(ec.product.productType&&ec.product.productType==4&&ec.product.isDespositSku==1)){$("#comb-price").html(f.toFixed(2))}};c.renderGroup=function(e){var f=[],d=$("#bundle-list-"+e),g=$("#comb-pro-"+e);if(d.length>0){f.push("#tab-bundle");d.show().siblings().hide();c.renderBundle(e)}if(g.length>0){f.push("#tab-comb");$("#comb-"+e).show().siblings().hide();g.show().siblings().hide();a(e)}$("#tab-bundle,#tab-comb").hide();if(f.length==0){$("#group-area").hide();return}if(f.length>1){f.push("#tab-split")}f.push("#group-area");$(f.join(",")).show()};c.renderBundle=function(d){var e=$("#bundle-list-"+d);this.showBundle(e.children("li.current").attr("data-id"))};c.showBundle=function(e){$("#bundle-pro-"+e+",#bundle-price-"+e).show().siblings().hide();b=e;var d=$("#bundle-pro-"+e)}})(ec.product);(function(){var a;_options={};_options["default"]={};_options.normal={renderInventory:function(e){var h=ec.product.getSkuInfo(ec.product.getSku()||ec.product.defaultSku),f=$("#pro-msg"),g=$("#pro-quantity-area,#pro-operation"),b=$("#pro-operation"),c=$("#isPriority").val();$("#tab-addcart-button").hide();$("#tab-notice-button").hide();if(ec.product.status==3){f.show();$("#pro-msg-title").html("\u8be5\u5546\u54c1\u5df2\u4e0b\u67b6");b.css("visibility","hidden");return}if(ec.product.status==5){f.show();$("#pro-msg-title").html("\u8be5\u5546\u54c1\u4e0d\u5728\u6b64\u9500\u552e\u524d\u7aef\u9500\u552e");b.css("visibility","hidden");return}if(h.tipsContent.length>1){f.show();$("#pro-msg-title").html(h.tipsContent)}else{f.hide()}if(h.priceMode==2){$("#pro-price").html("<label>\u534e&nbsp;\u4e3a&nbsp;&nbsp;\u4ef7\uff1a</label><b>\u6682\u65e0\u62a5\u4ef7</b>")}if(c==1){if(ec.product.getSkuPriority(h.id)==true){b.html('<a href="javascript:;" class="button-buy button-style-1" title="\u7acb\u5373\u8d2d\u4e70" onclick="ec.product.buy(\'sku\');return false;"><span>\u7acb\u5373\u8d2d\u4e70</span></a>');$("#pro-quantity-area").hide();b.css("visibility","visible");$("#order-confirm-form").attr({action:"/order/priorityConfirm",method:"post"});return}}$("#order-confirm-form").attr({action:"/order/nowConfirmcart",method:"post"});$("#pro-fixed-action-area").removeClass();$("#pro-fixed-action-area").addClass("pro-fixed-action");switch(parseInt(h.buttonMode,10)){case 5:b.css("visibility","hidden");$("#pro-quantity-area").hide();return;case 4:b.css("visibility","hidden");$("#pro-quantity-area").hide();return;case 2:b.html('<a href="javascript:;" class="button-buy button-style-1" title="\u7acb\u5373\u8d2d\u4e70" onclick="ec.product.buy(\'sku\');return false;"><span>\u7acb\u5373\u8d2d\u4e70</span></a>');$("#pro-quantity-area").show();b.css("visibility","visible");return;case 6:b.html('<a href="javascript:;" class="button-buy button-style-1" title="\u7acb\u5373\u8d2d\u4e70" onclick="ec.product.extendBuyNow();return false;"><span>\u7acb\u5373\u8d2d\u4e70</span></a>');$("#pro-quantity-area").show();b.css("visibility","visible");return;case 7:b.html('<a target="_blank" href="'+h.gotoUrl+'" class="button-style-2 button-appointment" title="\u7acb\u5373\u9884\u7ea6"><span>\u7acb\u5373\u9884\u7ea6</span></a>');b.css("visibility","visible");return;case 8:return;case 9:b.html('<a target="_blank" href="'+h.gotoUrl+'" class="button-style-2 button-sellRemind" title="\u5f00\u552e\u63d0\u9192"><span>\u5f00\u552e\u63d0\u9192</span></a>');b.css("visibility","visible");return;case 10:ec.product.timingBuy();return;case 11:if(e){$("#pro-quantity-area").show();b.css("visibility","visible");var d='<a href="javascript:;" onclick="ec.product.orderNowCover()" class="button-book-2 button-style-2"  title="\u7acb\u5373\u4e0b\u5355"><span>\u7acb\u5373\u4e0b\u5355</span></a>';b.html(d);$("#tab-addcart-button").show()}else{$("#pro-quantity-area").hide();b.css("visibility","visible");b.html('<a href="javascript:;" class="button-notice-arrival button-style-2" title="\u5230\u8d27\u901a\u77e5" onclick="ec.product.arrival()"><span>\u5230\u8d27\u901a\u77e5</span></a>');$("#tab-notice-button").show()}return;case 12:b.css("visibility","hidden");$("#pro-quantity-area").hide();return;default:if(e){$("#pro-quantity-area").show();b.css("visibility","visible");if(h.groupType=="1"){b.html('<a href="javascript:;" onclick="ec.product.addCart()" class="button-group-2 button-style-1" title="\u7acb\u5373\u56e2\u8d2d"><span>\u7acb\u5373\u56e2\u8d2d</span></a>')}else{var d='<a href="javascript:;" onclick="ec.product.addCart()" class="button-add-cart button-style-1" title="\u52a0\u5165\u8d2d\u7269\u8f66"><span>\u52a0\u5165\u8d2d\u7269\u8f66</span></a><a href="javascript:;" onclick="ec.product.orderNow()" class="button-book-2 button-style-2"  title="\u7acb\u5373\u4e0b\u5355"><span>\u7acb\u5373\u4e0b\u5355</span></a>';b.html(d);$("#tab-addcart-button").show()}}else{$("#pro-quantity-area").hide();b.css("visibility","visible");b.html('<a href="javascript:;" class="button-notice-arrival button-style-2" title="\u5230\u8d27\u901a\u77e5" onclick="ec.product.arrival()"><span>\u5230\u8d27\u901a\u77e5</span></a>');$("#tab-notice-button").show()}}}};_options.reservation={renderInventory:function(b){$("#pro-msg").hide();if(b){$("#pro-quantity-area").show();$("#pro-operation").html('<a href="javascript:;"  onclick="ec.product.addCartWithLogin()" class="button-book-2  button-style-1" title="\u9884\u7ea6\u8d2d\u4e70"><span>\u9884\u7ea6\u8d2d\u4e70</span></a>')}else{$("#pro-quantity-area").hide();$("#pro-operation").html('<a href="javascript:;" class="button-notice-arrival button-style-2" title="\u5230\u8d27\u901a\u77e5" onclick="ec.product.arrival()"><span>\u5230\u8d27\u901a\u77e5</span></a>')}}};_options.queue={renderInventory:function(b){if(b){$("#sale-buy-btn").show();$("#sale-sell-out").hide()}else{$("#sale-buy-btn").hide();$("#sale-sell-out").show()}}};_options.seckill={renderInventory:function(b){if(b){$("#sale-buy-btn").show();$("#sale-sell-out").hide()}else{$("#sale-buy-btn").hide();$("#sale-sell-out").show()}}};ec.product.execute=function(e,c){var d=_options[a],b=d[e]||_options["default"][e];if(b){b.apply(ec.product,c)}};ec.product.setType=function(b){a=b;switch(b){case"normal":case"reservation":ec.product.isSale=false;break;default:ec.product.isSale=true}ec.product.prefix=ec.product.isSale?"/sale":"/product"}})();ec.ready(function(){var o=ec.product;var f=false;var c=false;var j=function(v){var t=$("#pro-evaluate-click-type").children(".current").attr("id");if(t=="pro-evaluate-click-high"){v.type=0}else{if(t=="pro-evaluate-click-mid"){v.type=1}else{if(t=="pro-evaluate-click-low"){v.type=2}else{v.type=-1}}}var u,s;if(v.type>=0){u=new String(v.type);s="&remarkLevel="+u}else{s=""}new ec.ajax().get({url:ec.remark.prefix+"/queryEvaluate.json?pid="+ec.product.id+"&pageNumber="+v.pageNumber+s+"&t="+new Date().getTime(),dataType:"jsonp",successFunction:function(F){if(!F.success){return}if(c==true){ec.ui.scrollTo("#pro-tab-evaluate")}c=true;f=true;var B=[],w,E;for(var A=0;A<F.remarkList.length;A++){w=F.remarkList[A];var x=w.gradeCode==null?0:w.gradeCode;var D="/images/echannel/misc/defaultface_user_small.png";B.push('<div class="pro-comment-item clearfix">');try{D=imagePath+"/echannel/misc/defaultface_user_small.png"}catch(y){}B.push('<div class="pro-comment-user"><p class="pro-comment-user-img"><img src="'+D+'" alt="'+D+'"');B.push(ec.util.escapeHtml(w.custName));B.push('"/></p><p class="pro-comment-user-name">');B.push(ec.util.escapeHtml(w.custName));B.push("</p>");B.push('<s class="pro-comment-user-tag"><i class="icon-vip-level-'+x+'"></i></s>');B.push("</div>");B.push('<div class="pro-user-comment-main">');B.push('<div class="pro-user-comment">');B.push('<div class="h clearfix">');B.push('<div class="pro-user-comment-score">');B.push('<span class="pro-star"><span class="starRating-area"><s style="width:'+(w.score*20)+'%"></s></span></span>');B.push("</div>");B.push('<div class="pro-user-comment-impress">');B.push("<ul>");for(var z=0;z<w.labelList.length;z++){B.push("<li>"+ec.util.escapeHtml(w.labelList[z])+"</li>")}B.push("</ul>");B.push("</div>");B.push('<div class="pro-user-comment-time">');B.push(w.createDate);B.push("</div>");B.push("</div>");B.push('<div class="b">');B.push((ec.util.escapeHtml(w.content)||""));B.push("</div>");B.push("</div>");for(var z=0;z<w.msgReplyList.length;z++){E=w.msgReplyList[z];B.push('<div class="pro-admin-reply">');B.push('<dl class="clearfix">');B.push("<dt>"+(ec.util.escapeHtml(E.replyerName)||"")+"\u56de\u590d\uff1a</dt>");B.push("<dd>"+(ec.util.escapeHtml(E.replyContent)||"")+"</dd>");B.push("</dl>");B.push("</div>")}B.push("</div>");B.push("</div>");B.push("</div>")}var C=$("#pro-msg-list");C.html(B.join(""));if(F.remarkList.length==0){C.hide()}else{C.show()}if(F.page.totalPage>1){$("#pro-msg-pager").show();$("#pro-msg-pagerup").show();$("#pro-msg-pager").pager({pageNumber:F.page.pageNumber,pageCount:F.page.totalPage,recordCount:F.page.totalRow,qpageSize:5,text:{first:"|&lt;",pre:"&lt",next:"&gt;",last:"&gt;|"},item:["first","pre","qpage","next","last","quickPager"],callBack:j});$("#pro-msg-pagerup").pager({pageNumber:F.page.pageNumber,pageCount:F.page.totalPage,recordCount:F.page.totalRow,qpageSize:5,text:{first:"|&lt;",pre:"&lt",next:"&gt;",last:"&gt;|"},item:["first","pre","qpage","next","last","quickPager"],callBack:j});$("#pro-msg-pager li.link").live("click",function(){$("html,body").animate({scrollTop:$("#pro-tab-evaluate-content").offset().top-$("#pro-tab-area").height()},100)})}else{$("#pro-msg-pager").hide();$("#pro-msg-pagerup").hide()}}})};var n=function(){new ec.ajax().get({url:ec.remark.prefix+"/queryEvaluateScore.json?pid="+ec.product.id+"&t="+new Date().getTime(),dataType:"jsonp",successFunction:function(E){if(!E.success){return}var s=0;for(var x=0;x<3;x++){var v=E.remarkLevelList[x];if(v){var w="("+(v.times||("0"))+")";var u=("("+v.percent+"%)")||"";var z=("width:"+v.percent+"%"||"");var C,A,y;if(x==0){$("#pro-evaluate-avgSorce").html(v.percent)}else{if(x==1){}else{if(x==2){}}}s+=parseInt((v.times||("0")))}else{}}var B=new String(s);$("#pro-evaluate-number-all").html("("+B+")");if(E.remarkLabelList){var D=[];D.push('<div class="h">\u4e70\u5bb6\u5370\u8c61\uff1a</div>');D.push("<dl>");for(var x=0;x<E.remarkLabelList.length;x++){var v=E.remarkLabelList[x];var t=v.times>0?("<em>("+(v.times||"")+")</em>"):"";D.push("<dd>"+(v.labelName||"")+t+"</dd>")}D.push("</dl>");$("#pro-score-impress").html(D.join(""))}}})};ec.product.tabSkuInfo(ec.product.setSkuId||ec.product.defaultSku);var r=false;ec.product.getParameter=function(v,x){if(ec.product.getSkuForParement(v)!=undefined){return}var u=v.split(",");var t=x.split(",");var s="";for(var w=0;w<t.length;w+=1){s+="sbomCode="+t[w];if(w<t.length-1){s+="&"}}$.ajax({url:pmsHttpDomain+"product/querySpecificationMulti.json?"+s,dataType:"jsonp",jsonp:"callback",jsonpCallback:"flightHandler",timeout:20000,success:function(N){if(!N.success){return}ec.product.setSkuForParement(v);for(var B=0;B<u.length;B+=1){var K=u[B];var G=t[B];var M=null;for(var C=0;C<N.data.length;C+=1){var y=N.data[C];if(G==y.sbomCode){M=y.specificationList;break}}if(M){var F=[],A;F.push("<div id='pro-tab-parameter-content-"+K+"'><table border='0' cellpadding='0' cellspacing='0'><tbody>");var J=[];for(var E=0;E<M.length;E++){A=M[E];var I=[];if("0"==A.parentCode){I.push("<tr><th colspan='2'><h3>"+A.name+"</h3></th></tr>");var z=A.code;var H=[];for(var D=0;D<M.length;D++){var L=M[D];if(L.parentCode!="0"&&L.parentCode==z){H.push("<tr><td class='p-name'>"+L.name+"</td><td class='p-desc'>"+L.value+"</td></tr>")}}if(H.length>0){J.push(I.join(""));J.push(H.join(""))}}}if(J.length>0){F.push(J.join(""))}F.push("</tbody></table></div>");$("#pro-tab-parameter-content").append(F.join(""));$("#pro-tab-parameter-content-"+(ec.product.setSkuId||K)).show().siblings().hide()}}},errorFunction:function(){$("#pro-tab-parameter-content").append("\u6b63\u5728\u52a0\u8f7d...")},timeoutFunction:function(){$("#pro-tab-parameter-content").append("\u6b63\u5728\u52a0\u8f7d...")},})};var g=function(){if(f){return}n();j({pageNumber:1,type:-1});$("#pro-tab-evaluate-content").show()};var b=$(window),a=document.compatMode=="CSS1Compat"?document.documentElement:document.body,i=0,d=0,k,e,m=function(){var s=function(){clearTimeout(e);e=setTimeout(function(){i=b.scrollTop();d=i+k;var u=$("#remarkLoading");var v=u.offset().top,w=v+u.height();if(v>=i&&v<=d){g()}},100)},t=function(u){k=a.clientHeight};b.bind("scroll",s);b.bind("resize",t);k=a.clientHeight;i=b.scrollTop();d=i+k};var o=ec.product;m();ec.ui.number("#pro-quantity",{max:999,min:1,minusBtn:'<a href="javascript:;" class="icon-minus-2 vam" title="\u51cf"><span>-</span></a>',plusBtn:'<a href="javascript:;" class="icon-plus-2 vam" title="\u52a0"><span>+</span></a>'});if(ec.product.productType&&ec.product.productType==4){$("#stock-area-id").click(function(){refreshDepositCombPrice()});$("#pro-quantity").change(function(){refreshDepositCombPrice()})}$("#extendProtected,#accidentProtected").hover(function(){$(this).addClass("hover")},function(){$(this).removeClass("hover")});$("#pro-tab-feature , #pro-tab-parameter , #pro-tab-package , #pro-tab-service , #pro-tab-evaluate").click(function(){var t=$(this),v=this.id;switch(v){case"pro-tab-feature":var u=ec.product.getSku();u=ec.product.getSkuInfo(u);ec.product.getFeature(u.id);break;case"pro-tab-package":case"pro-tab-service":break;case"pro-tab-parameter":var s=t.attr("data-skulist");var u=ec.product.getSku();u=ec.product.getSkuInfo(u);ec.product.getParameter(u.id,u.code);break;case"pro-tab-evaluate":if(f){break}n();j({pageNumber:1});break}t.addClass("current").siblings().removeClass("current");$("#"+v+"-content").show().siblings().hide();ec.ui.scrollTo("#"+v+"-content");$("#pro-tab-evaluate-content").show()});o.history.load(function(u){if(u.length==0){return}var t=[],v;for(var s=0;s<u.length;s++){v=u[s];v.price=(v.priceMode==2)?"<em>\u6682\u65e0\u62a5\u4ef7</em>":"<b>&yen;"+v.price+"</b>";t.push("<li><div>");t.push('<p class="p-img"><a href="/product/'+v.id+".html#"+v.skuId+'" title="'+v.briefName+'"><img src="'+ec.mediaPath+v.photoPath+"60_60_"+v.photoName+'" alt="'+v.briefName+'"/></a></p>');t.push('<p class="p-name"><a href="/product/'+v.id+".html#"+v.skuId+'" title="'+v.briefName+'">'+v.name+"</a></p>");t.push('<p class="p-price">'+v.price+"</p>");t.push("</div></li>")}$("#product-history-list").html(t.join(""));$("#product-history-area").show()},null,ec.product.isSale?null:ec.product.id);o.renderGroup(o.setSkuId||o.defaultSku);var h;$("#bundle-tab li").mouseover(function(){var s=$(this);s.addClass("current").siblings().removeClass("current");o.showBundle(s.attr("data-id"))});o.renderBundle(o.setSkuId||o.defaultSku);$("#comb-pro-area input").click(function(){var u=$(this),t=parseInt($("#comb-count").html(),10)||0,s=parseFloat($("#comb-price").html())||0;if(this.checked){s+=parseFloat(u.attr("data-price"));t++}else{s-=parseFloat(u.attr("data-price"));t--}$("#comb-price").html(s.toFixed(2));console.log("in  comb-pro-area input .click ...");$("#comb-count").html(t)});new ec.ajax().get({url:ec.remark.prefix+"/queryPrdinfoEvaluateScore.json?pid="+ec.product.id+"&t="+new Date().getTime(),dataType:"jsonp",successFunction:function(s){$("#prd-remark-scoreAverage").attr("style","width:"+(s.prdRemarkNum.scoreAverage*20)+"%");$("#prd-remark-scoreAverage").show();$("#prd-remark-jmptoremark").attr("title","\u5171 "+s.prdRemarkNum.totalPrdCount+" \u6761\u8bc4\u8bba");$("#prd-remark-jmptoremark").html("\u5171&nbsp;"+s.prdRemarkNum.totalPrdCount+"&nbsp;\u6761\u8bc4\u8bba");$("#prd-remark-jmptoremark").show();$("#prd-remark-span-tab-evaluate").html("\u7528\u6237\u8bc4\u4ef7<em>\uff08"+s.prdRemarkNum.totalPrdCount+"\uff09</em>");$("#prd-remark-span-tab-evaluate").show()}});var l=ec.product.getSku();l=ec.product.getSkuInfo(l);ec.product.initContract(l);ec.form.input.label("#extend-text","\u8f93\u5165IMEI/SN/MEID\u4fe1\u606f")});ec.product.divchange=function(a){if(a==1){$("#prddetail_counsel_all").show();$("#prddetail_counsel_prd").hide();$("#prddetail_counsel_pay").hide();$("#prddetail_counsel_trans").hide();$("#prddetail_counsel_service").hide();$("#prddetail_counsel_ques").hide();$("#prd_detail_counsel_2").removeAttr("class");$("#prd_detail_counsel_3").removeAttr("class");$("#prd_detail_counsel_4").removeAttr("class");$("#prd_detail_counsel_5").removeAttr("class");$("#prd_detail_counsel_6").removeAttr("class");$("#prd_detail_counsel_1").attr("class","current")}else{if(a==2){$("#prddetail_counsel_all").hide();$("#prddetail_counsel_prd").show();$("#prddetail_counsel_pay").hide();$("#prddetail_counsel_trans").hide();$("#prddetail_counsel_service").hide();$("#prddetail_counsel_ques").hide();$("#prd_detail_counsel_1").removeAttr("class");$("#prd_detail_counsel_3").removeAttr("class");$("#prd_detail_counsel_4").removeAttr("class");$("#prd_detail_counsel_5").removeAttr("class");$("#prd_detail_counsel_6").removeAttr("class");$("#prd_detail_counsel_2").attr("class","current");ec.product.counselloadprd({pageNumber:1})}else{if(a==3){$("#prddetail_counsel_all").hide();$("#prddetail_counsel_prd").hide();$("#prddetail_counsel_pay").show();$("#prddetail_counsel_trans").hide();$("#prddetail_counsel_service").hide();$("#prddetail_counsel_ques").hide();$("#prd_detail_counsel_1").removeAttr("class");$("#prd_detail_counsel_2").removeAttr("class");$("#prd_detail_counsel_4").removeAttr("class");$("#prd_detail_counsel_5").removeAttr("class");$("#prd_detail_counsel_6").removeAttr("class");$("#prd_detail_counsel_3").attr("class","current");ec.product.paycounselload({pageNumber:1})}else{if(a==4){$("#prddetail_counsel_all").hide();$("#prddetail_counsel_prd").hide();$("#prddetail_counsel_pay").hide();$("#prddetail_counsel_trans").show();$("#prddetail_counsel_service").hide();$("#prddetail_counsel_ques").hide();$("#prd_detail_counsel_2").removeAttr("class");$("#prd_detail_counsel_3").removeAttr("class");$("#prd_detail_counsel_1").removeAttr("class");$("#prd_detail_counsel_5").removeAttr("class");$("#prd_detail_counsel_6").removeAttr("class");$("#prd_detail_counsel_4").attr("class","current");ec.product.transcounselload({pageNumber:1})}else{if(a==5){$("#prddetail_counsel_all").hide();$("#prddetail_counsel_prd").hide();$("#prddetail_counsel_pay").hide();$("#prddetail_counsel_trans").hide();$("#prddetail_counsel_service").show();$("#prddetail_counsel_ques").hide();$("#prd_detail_counsel_1").removeAttr("class");$("#prd_detail_counsel_3").removeAttr("class");$("#prd_detail_counsel_4").removeAttr("class");$("#prd_detail_counsel_2").removeAttr("class");$("#prd_detail_counsel_6").removeAttr("class");$("#prd_detail_counsel_5").attr("class","current");ec.product.sercounselload({pageNumber:1})}else{$("#prddetail_counsel_all").hide();$("#prddetail_counsel_prd").hide();$("#prddetail_counsel_pay").hide();$("#prddetail_counsel_trans").hide();$("#prddetail_counsel_service").hide();$("#prddetail_counsel_ques").show();$("#prd_detail_counsel_1").removeAttr("class");$("#prd_detail_counsel_3").removeAttr("class");$("#prd_detail_counsel_4").removeAttr("class");$("#prd_detail_counsel_5").removeAttr("class");$("#prd_detail_counsel_2").removeAttr("class");$("#prd_detail_counsel_6").attr("class","current")}}}}}};ec.product.counselloadall=function(a){new ec.ajax().submit({url:"/product/query/consultation/"+ec.product.id+".json",data:{prdId:ec.product.id,dataType:0,pageNumber:a.pageNumber,pageSize:5},timeout:10000,timeoutFunction:function(){alert("\u8bfb\u53d6\u8d85\u65f6\uff0c\u8bf7\u91cd\u8bd5\uff01")},successFunction:function(c){if(!c.success){ec.showError(c);return}var b=[];b=ec.product.createcounselhtml(c);$("#all_prd_counsel_content").html(b.join(""));ec.product.allrenderPage(c.page)}})};ec.product.allrenderPage=function(a){$("#all_prd_counsel").show();$("#all_prd_counsel").pager({pageNumber:a.pageNumber,pageCount:a.totalPage,pageSize:5,text:{first:"|&lt;",pre:"&lt",next:"&gt;",last:"&gt;|"},item:["first","pre","qpage","next","last","quickPager"],callBack:ec.product.counselloadall})};ec.product.counselloadprd=function(a){new ec.ajax().submit({url:"/product/query/consultation/"+ec.product.id+".json",data:{prdId:ec.product.id,dataType:1,pageNumber:a.pageNumber,pageSize:5},timeout:10000,timeoutFunction:function(){alert("\u8bfb\u53d6\u8d85\u65f6\uff0c\u8bf7\u91cd\u8bd5\uff01")},successFunction:function(c){if(!c.success){ec.showError(c);return}var b=[];b=ec.product.createcounselhtml(c);$("#prd_prd_counsel_content").html(b.join(""));if(c.page.totalRow>0){$("#prddetail_counsel_prd_total em").html(c.page.totalRow)}else{$("#prddetail_counsel_prd_total").hide()}ec.product.prdrenderPage(c.page)}})};ec.product.prdrenderPage=function(a){$("#prd_prd_counsel").show();$("#prd_prd_counsel").pager({pageNumber:a.pageNumber,pageCount:a.totalPage,pageSize:5,text:{first:"|&lt;",pre:"&lt",next:"&gt;",last:"&gt;|"},item:["first","pre","qpage","next","last","quickPager"],callBack:ec.product.counselloadprd})};ec.product.paycounselload=function(a){new ec.ajax().submit({url:"/product/query/consultation/"+ec.product.id+".json",data:{prdId:ec.product.id,dataType:2,pageNumber:a.pageNumber,pageSize:5},timeout:10000,timeoutFunction:function(){alert("\u8bfb\u53d6\u8d85\u65f6\uff0c\u8bf7\u91cd\u8bd5\uff01")},successFunction:function(c){if(!c.success){ec.showError(c);return}var b=[];b=ec.product.createcounselhtml(c);$("#pay_prd_counsel_content").html(b.join(""));if(c.page.totalRow>0){$("#prddetail_counsel_pay_total em").html(c.page.totalRow)}else{$("#prddetail_counsel_pay_total").hide()}ec.product.payrenderPage(c.page)}})};ec.product.payrenderPage=function(a){$("#pay_prd_counsel_page").show();$("#pay_prd_counsel_page").pager({pageNumber:a.pageNumber,pageCount:a.totalPage,pageSize:5,text:{first:"|&lt;",pre:"&lt",next:"&gt;",last:"&gt;|"},item:["first","pre","qpage","next","last","quickPager"],callBack:ec.product.paycounselload})};ec.product.transcounselload=function(a){new ec.ajax().submit({url:"/product/query/consultation/"+ec.product.id+".json",data:{prdId:ec.product.id,dataType:3,pageNumber:a.pageNumber,pageSize:5},timeout:10000,timeoutFunction:function(){alert("\u8bfb\u53d6\u8d85\u65f6\uff0c\u8bf7\u91cd\u8bd5\uff01")},successFunction:function(c){if(!c.success){ec.showError(c);return}var b=[];b=ec.product.createcounselhtml(c);$("#trans_prd_counsel_content").html(b.join(""));if(c.page.totalRow>0){$("#prddetail_counsel_trans_total em").html(c.page.totalRow)}else{$("#prddetail_counsel_trans_total").hide()}ec.product.transrenderPage(c.page)}})};ec.product.transrenderPage=function(a){$("#trans_prd_counsel_page").show();$("#trans_prd_counsel_page").pager({pageNumber:a.pageNumber,pageCount:a.totalPage,pageSize:5,text:{first:"|&lt;",pre:"&lt",next:"&gt;",last:"&gt;|"},item:["first","pre","qpage","next","last","quickPager"],callBack:ec.product.transcounselload})};ec.product.sercounselload=function(a){new ec.ajax().submit({url:"/product/query/consultation/"+ec.product.id+".json",data:{prdId:ec.product.id,dataType:4,pageNumber:a.pageNumber,pageSize:5},timeout:10000,timeoutFunction:function(){alert("\u8bfb\u53d6\u8d85\u65f6\uff0c\u8bf7\u91cd\u8bd5\uff01")},successFunction:function(c){if(!c.success){ec.showError(c);return}var b=[];b=ec.product.createcounselhtml(c);$("#ser_prd_counsel_content").html(b.join(""));if(c.page.totalRow>0){$("#prddetail_counsel_serv_total em").html(c.page.totalRow)}else{$("#prddetail_counsel_serv_total").hide()}ec.product.serrenderPage(c.page)}})};ec.product.serrenderPage=function(a){$("#ser_prd_counsel_page").show();$("#ser_prd_counsel_page").pager({pageNumber:a.pageNumber,pageCount:a.totalPage,pageSize:5,text:{first:"|&lt;",pre:"&lt",next:"&gt;",last:"&gt;|"},item:["first","pre","qpage","next","last","quickPager"],callBack:ec.product.sercounselload})};ec.product.quescounselload=function(a){new ec.ajax().submit({url:"/product/query/frequentyQuestions/"+ec.product.id+".json",data:{prdId:ec.product.id,pageNumber:a.pageNumber,pageSize:10},timeout:10000,timeoutFunction:function(){alert("\u8bfb\u53d6\u8d85\u65f6\uff0c\u8bf7\u91cd\u8bd5\uff01")},successFunction:function(d){if(!d.success){ec.showError(d);return}var c=[];if(d.page.totalRow>0){for(var b=0;b<d.prdFrequentyQuestionsList.length;b++){var e=d.prdFrequentyQuestionsList[b];c.push('<dl class="pro-faq-item"><dt>'+((a.pageNumber-1)*10+b+1)+"\u3001"+e.question+"</dt>");c.push("<dd>"+e.reply+"</dd></dl>")}}else{c.push('<div class="pro-inquire-empty"><p>\u6682\u65e0\u76f8\u5173\u5185\u5bb9</p></div>')}$("#ques_prd_counsel_content").html(c.join(""));if(d.page.totalRow>0){$("#prddetail_counsel_ques_total em").html(d.page.totalRow)}else{$("#prddetail_counsel_ques_total").hide()}ec.product.quesrenderPage(d.page)}})};ec.product.quesrenderPage=function(a){$("#ques_prd_counsel_page").show();$("#ques_prd_counsel_page").pager({pageNumber:a.pageNumber,pageCount:a.totalPage,pageSize:10,text:{first:"|&lt;",pre:"&lt",next:"&gt;",last:"&gt;|"},item:["first","pre","qpage","next","last","quickPager"],callBack:ec.product.quescounselload})};ec.product.createcounselhtml=function(e){var d=[];if(e.page.totalRow>0){for(var c=0;c<e.prdConsultationList.length;c++){p=e.prdConsultationList[c];var g=p.userName;var b=p.gradeCode;var a=new Date(p.createTime);var f=new Date(p.answerTime);d.push('<div class="pro-inquire-item clearfix">');d.push('<div class="pro-inquire-user"><label>\u7f51\u53cb\uff1a</label><span>'+g+"</span>");d.push('<s><i class="icon-vip-level-'+b+'"></i></s>');d.push("<em>"+a.format("yyyy-MM-dd HH:mm:ss")+"</em>");d.push('</div><div class="pro-inquire-question">');d.push("<label>\u54a8\u8be2\u5185\u5bb9\uff1a</label><span>"+ec.util.escapeHtml(p.question)+"</span></div>");d.push('<div class="pro-inquire-answer"><label>\u56de\u590d\uff1a</label><span>'+ec.util.escapeHtml(p.answer)+"</span>");d.push("<em>"+f.format("yyyy-MM-dd HH:mm:ss")+"</em></div>");d.push("</div>")}}else{d.push('<div class="pro-inquire-empty"><p>\u6682\u65e0\u76f8\u5173\u5185\u5bb9</p></div>')}return d};ec.product.loginCheckBefCoun=function(){if(!ec.account.isLogin()){location.href="/account/login?url="+encodeURIComponent(window.location.pathname+"#counseltextid")}else{$("#counseltextid").focus();$("#error-span").hide()}};ec.product.submitCounsel=function(){var a=$("<div/>").text($("#counseltextid").val()).html();var b=ec.product.optCompany(a);if(b==null||b.length<1){$("#error-span").show();$("#error-span").html("\u63d0\u4ea4\u5185\u5bb9\u4e3a\u7a7a");return}if(b.length>100){$("#error-span").show();$("#error-span").html("\u8f93\u5165\u7684\u6587\u5b57\u957f\u5ea6\u4e0d\u80fd\u8d85\u8fc7100\u4e2a\u5b57,\u8bf7\u91cd\u65b0\u8f93\u5165");return}new ec.ajax().submit({url:"/product/save/consultation.json",form:"#counsel_content_form",data:{productId:ec.product.id},successFunction:function(c){if(!c.success){$("#error-span").show();$("#error-span").html(c.msg)}else{if($("#safeEmail").attr("checked")){ec.product.counselSuccess(c.changeEmailUrl)}else{alert("\u63d0\u4ea4\u6210\u529f,\u8bf7\u8010\u5fc3\u7b49\u5f85\u5ba2\u670d\u4eba\u5458\u7684\u7b54\u590d\uff01")}$("#counsel_content_form")[0].reset();$("#error-span").hide();return}}})};ec.product.optCompany=function(a){return a.replace(/(^\s*)|(\s*$)/g,"")};ec.product.counselSuccess=function(a){ec.account.afterLogin(function(){ec.product.syncCustomSession();var b=ec.product.email;var c=new ec.box($("#product-counsel-html").val(),{boxid:"product-counsel-box",boxclass:"ol_box_4",showButton:false,onopen:function(d){if(ec.util.isEmpty(b)){$("#counsel-success-msg").html("\u56de\u590d\u5c06\u53d1\u9001\u5230\u60a8\u7684\u5b89\u5168\u90ae\u7bb1\uff0c\u60a8\u8fd8\u672a\u7ed1\u5b9a\uff0c\u8bf7\u5148\u7ed1\u5b9a\u5b89\u5168\u90ae\u7bb1\u3002");$("#counsel-bind-email").html('<a href="'+a+'" class="box-change box-button-style-2" target="_blank" onclick="ec.product.secEmailOper()"><span>\u53bb\u7ed1\u5b9a</span></a>')}else{$("#counsel-success-msg").html("\u5ba2\u670d\u56de\u590d\u5c06\u53d1\u9001\u5230\u60a8\u7684\u5b89\u5168\u90ae\u7bb1&nbsp;"+b+"\uff0c\u53ef\u70b9\u51fb\u4fee\u6539\u5b89\u5168\u90ae\u7bb1\u3002");$("#counsel-bind-email").html('<a href="'+a+'" class="box-change box-button-style-2" target="_blank" onclick="ec.product.secEmailOper()"><span>\u4fee\u6539\u5b89\u5168\u90ae\u7bb1</span></a>')}},onok:function(d){},onclose:function(d){$(".ol_box_mask").remove()}});c.open();ec.product.secEmailOper=function(){c.close();$(".ol_box_mask").remove()}})};ec.product.combChange=function(e){var c=$(e).parent();c.addClass("current");c.siblings().not(c).removeClass("current");var g=c.parent().attr("id");var b=g.substring(14,g.length);var d=c.index();var a=$('[id="comb-pro-'+b+'"]');var f=a.eq(d);f.show();f.siblings().not(f).hide()};ec.product.syncCustomSession=function(){new ec.ajax().get({async:false,url:"/account/syncEmailAndMobile.json",timeout:10000,successFunction:function(a){if(!ec.util.isEmpty(a.customerInfo)){ec.product.email=a.customerInfo.email;ec.product.mobile=a.customerInfo.mobile}return},timeoutFunction:function(){return},errorFunction:function(){return}})};ec.product.getSysDate=function(){var a=new Date();new ec.ajax().get({async:false,url:"/system/getSysDate.json",timeout:10000,successFunction:function(b){if(!ec.util.isEmpty(b.now)){a.setTime(b.now.parseDate("yyyy-MM-dd HH:mm:ss"))}}});return a};ec.product.splitMobile=function(b){var a="";for(var c=0;c<(b.length);c++){if((b.length-c)%4==0){a+="&nbsp;&nbsp;"}a+=b.substring(c,c+1)}return a};ec.product.depositInfo={};ec.product.depositInit=function(b){if(ec.product.runningSkuId!=b){return}var a=false;if($("#comb-pro-"+b)){a=true}ec.product.depositInfo={};if($("#pro-agreement-area")){$("#pro-agreement-area").hide()}if($("#pro-suit-cost-agreement-area")){$("#pro-suit-cost-agreement-area").hide()}$("#pro-quantity-area").hide();$("#pro-operation").css("visibility","hidden");$("#pro-price").html("<label>\u8ba2&nbsp;&nbsp;&nbsp;&nbsp;\u91d1\uff1a</label><b>&nbsp;\u6682\u65e0\u62a5\u4ef7</b>");$(".suit-master-area #mainCombPrice").html("\u8ba2\u91d1\uff1a\u6682\u65e0\u62a5\u4ef7");if(a){$(".pro-suit-cost-button").css("visibility","hidden");$("#comb-price-label").html("\u8ba2\u91d1\uff1a");$("#comb-price").html("\u6682\u65e0\u62a5\u4ef7")}$("#pro-operation").css("visibility","hidden");if(a){$(".pro-suit-cost-button").css("visibility","hidden")}};ec.product.isDespositSku=0;ec.product.runningSkuId=0;ec.product.depositActivity=function(b){var c=ec.product.getSkuInfo(b);var a=false;if($("#comb-pro-"+b)){a=true}if($("#pro-agreement-area")){$("#pro-agreement-area").hide()}if($("#pro-suit-cost-agreement-area")){$("#pro-suit-cost-agreement-area").hide()}$("#pro-operation").css("visibility","hidden");if(a){$(".pro-suit-cost-button").css("visibility","hidden")}ec.product.isDespositSku=0;ec.product.runningSkuId=b;new ec.ajax().get({url:"/product/queryDeposit.json",data:{skuId:b},timeout:10000,timeoutFunction:function(){if(ec.product.runningSkuId!=b){return}ec.product.isDespositSku=2;if(c&&c.buttonMode==8){ec.product.rushbuyActivity()}else{ec.product.depositInit(b);alert("\u67e5\u8be2\u9884\u4ed8\u5b9a\u91d1\u6d3b\u52a8\u4fe1\u606f\u8d85\u65f6\uff0c\u8bf7\u91cd\u65b0\u5237\u65b0\u9875\u9762\u3002")}},beforeSendFunction:ec.ui.loading.show,afterSendFunction:ec.ui.loading.hide,successFunction:function(d){if(ec.product.runningSkuId!=b){return}if(!d||!d.success){ec.product.isDespositSku=2;if(c&&c.buttonMode==8){ec.product.rushbuyActivity()}else{ec.product.depositInit(b)}return}ec.product.isDespositSku=1;ec.product.depositInit(b);if(d.notBegin==true){$("#pro-operation").html('<a href="javascript:;" class="button-style-disabled-1 button-event-disabled">\u6d3b\u52a8\u5373\u5c06\u5f00\u59cb</a>');$("#pro-operation").css("visibility","visible");if(a){$(".pro-suit-cost-button").html('<a href="javascript:;" class="button-style-disabled-1 button-event-disabled">\u6d3b\u52a8\u5373\u5c06\u5f00\u59cb</a>');$(".pro-suit-cost-button").css("visibility","visible")}return}if(d.end==true){$("#pro-operation").html('<a href="javascript:;" class="button-style-disabled-1 button-event-disabled">\u6d3b\u52a8\u5df2\u7ecf\u7ed3\u675f</a>');$("#pro-operation").css("visibility","visible");if(a){$(".pro-suit-cost-button").html('<a href="javascript:;" class="button-style-disabled-1 button-event-disabled">\u6d3b\u52a8\u5df2\u7ecf\u7ed3\u675f</a>');$(".pro-suit-cost-button").css("visibility","visible")}return}ec.product.depositInfo=d;if(d.promoActivity.description.length>0){if($("#pro-parts-area").length>0){$("#pro-parts-area").find("dt").text("")}}$("#pro-promotions-list").html($("<div/>").html("<li>"+d.promoActivity.description+"</li>").html()).show();$("#pro-promotions-area").show();$("#pro-price-old").hide();$("#pro-price").html("<label>\u8ba2&nbsp;\u91d1\uff1a</label><b>&yen;&nbsp;"+d.promoDepositSku.depositPrice.toFixed(2)+"</b>");if(a){$(".suit-master-area #mainCombPrice").html("\u8ba2\u91d1\uff1a&yen;"+d.promoDepositSku.depositPrice.toFixed(2));refreshDepositCombPrice()}$("#pro-agreement-area").show();if(a){$("#pro-suit-cost-agreement-area").show()}if(ec.product.inventory.haveInventory(b)){$("#pro-operation").html('<a href="javascript:;" class="button-style-1 button-event" onclick="ec.product.payDeposit(1);">\u652f\u4ed8\u8ba2\u91d1</a>');$("#pro-quantity-area").show();$("#pro-operation").css("visibility","visible");if(a){$(".pro-suit-cost-button").html('<a href="javascript:;" class="button-add-cart-2 button-style-1" title="\u652f\u4ed8\u8ba2\u91d1" onclick="ec.product.payDeposit(2);"><span>\u652f\u4ed8\u8ba2\u91d1</span></a>');$(".pro-suit-cost-button").css("visibility","visible")}}else{$("#pro-operation").html('<a href="javascript:;" class="button-notice-arrival button-style-2" title="\u5230\u8d27\u901a\u77e5" onclick="ec.product.arrival()">\u5230\u8d27\u901a\u77e5</a>');$("#pro-quantity-area").show();$("#pro-operation").css("visibility","visible");if(a){$(".pro-suit-cost-button").html('<a href="javascript:;" class="button-notice-arrival button-style-2" title="\u5230\u8d27\u901a\u77e5" onclick="ec.product.arrival()"><span>\u5230\u8d27\u901a\u77e5</span></a>');$(".pro-suit-cost-button").css("visibility","visible")}}}})};refreshDepositCombPrice=function(){if(ec.product.depositInfo&&ec.product.depositInfo.promoDepositSku){var a=ec.product.depositInfo.promoDepositSku;if(a.depositPrice&&a.depositPrice>=0){var b=a.depositPrice*$("#pro-quantity").val();$("#comb-price-label").html("\u8ba2\u91d1\uff1a&yen;");$("#comb-price").html(b.toFixed(2))}}};ec.product.showDepositAgreement=function(){var a='<div class="box-agreement-area">'+ec.product.depositInfo.promoActivity.ruleText+"</div>";new ec.box(a,{boxclass:"ol_box_4 ol_box_agreement",title:"\u8ba2\u91d1\u652f\u4ed8\u534f\u8bae",width:678,height:350,autoHeight:false}).open()};ec.product.payDeposit=function(a){if(!$("#pro-agreement-area-check").attr("checked")){var b='<div class="box-prompt-error-area"><div class="b"><p>\u60a8\u5fc5\u987b\u5148\u52fe\u9009\u540c\u610f\u8ba2\u91d1\u652f\u4ed8\u534f\u8bae\uff0c\u624d\u53ef\u4ee5\u8fdb\u884c\u8ba2\u91d1\u652f\u4ed8\u3002</p></div></div>';new ec.box(b,{boxclass:"ol_box_4",title:"\u6e29\u99a8\u63d0\u793a",showCancel:false}).open();return}if(!$("#pro-suit-cost-agreement-area-check").attr("checked")){var b='<div class="box-prompt-error-area"><div class="b"><p>\u60a8\u5fc5\u987b\u5148\u52fe\u9009\u540c\u610f\u8ba2\u91d1\u652f\u4ed8\u534f\u8bae\uff0c\u624d\u53ef\u4ee5\u8fdb\u884c\u8ba2\u91d1\u652f\u4ed8\u3002</p></div></div>';new ec.box(b,{boxclass:"ol_box_4",title:"\u6e29\u99a8\u63d0\u793a",showCancel:false}).open();return}ec.account.afterLogin(function(){ec.binding.cart.withPhone(function(){dealDepositInfo(a)})})};dealDepositInfo=function(b){var c=$("#pro-quantity").val();var a=ec.product.getSku()||ec.product.defaultSku;new ec.ajax().get({url:"/product/queryQualification.json",data:{skuId:a,quantity:c},timeout:10000,timeoutFunction:function(){alert("\u67e5\u8be2\u7528\u6237\u53c2\u4e0e\u8ba2\u91d1\u6d3b\u52a8\u7684\u4fe1\u606f\u8d85\u65f6\uff0c\u8bf7\u91cd\u8bd5\u3002")},beforeSendFunction:ec.ui.loading.show,afterSendFunction:ec.ui.loading.hide,successFunction:function(t){if(!t.success){var m="";if(t.sessionTimeout){m='<div class="box-prompt-error-area"><div class="b"><p>'+$("<div/>").text(t.msg).html()+"</p></div></div>";new ec.box(m,{boxclass:"ol_box_4",title:"\u6e29\u99a8\u63d0\u793a",showCancel:false,onok:function(v){var i=domainMain+"/account/login?url="+encodeURIComponent(window.location.pathname);window.location.href=i}}).open()}else{m='<div class="box-prompt-error-area"><div class="b"><p>'+$("<div/>").text(t.msg).html()+"</p></div></div>";new ec.box(m,{boxclass:"ol_box_4",title:"\u6e29\u99a8\u63d0\u793a",showCancel:false}).open()}return}var j=[];var n={};n.itemId=$("#pro-sku-code").html();n.qty=$("#pro-quantity").val();n.itemType="S0";j.push(n);var e=ec.product.gift.finalMainSbomGiftMap[ec.product.getSku()];if(e&&b==1){var d=[];for(var s in e){var f={sbomCode:e[s].giftSkuCode};d.push(f)}n.gifts=d}if(b==2){$('[id="comb-pro-'+a+'"]').find("input[name=skuId]:checked").each(function(){var i={};i.itemId=$(this).attr("data-scode");i.qty=1;i.itemType="S0";j.push(i)})}var k=[];var h=$("ul>li.selected>div.sku");for(var g=0;g<h.length;g++){k[g]=$(h[g]).attr("data-scode")}var r={};var l={};if($("#extendProtected").hasClass("selected")){r.itemId=k[0];r.qty=$("#pro-quantity").val();r.itemType="S1";r.itemProp={main_skucode:$("#pro-sku-code").html()};j.push(r);if($("#accidentProtected").hasClass("selected")){l.itemId=k[1];l.qty=$("#pro-quantity").val();l.itemType="S6";l.itemProp={main_skucode:$("#pro-sku-code").html()};j.push(l)}}else{if($("#accidentProtected").hasClass("selected")){l.itemId=k[0];l.qty=$("#pro-quantity").val();l.itemType="S6";l.itemProp={main_skucode:$("#pro-sku-code").html()};j.push(l)}}var u=ec.lang.json.stringify(j);var o="";o+='<input name="orderReqJson" type="text" value=\''+u+"'>";o+='<input name="state" type="text" value="0">';$("#order-confirm-deposit-form").html(o).submit()}})};ec.product.getFeature=function(a){if(ec.product.getSkuForFeature(a)!=undefined){return}new ec.ajax().get({url:"/product/querySkuDetailFeature.json",data:{skuId:ec.product.getSku()},timeout:10000,timeoutFunction:function(){$("#pro-tab-feature-content > div:first-child").html("\u6b63\u5728\u52a0\u8f7d...")},successFunction:function(c){if(!c.success){return}ec.product.setSkuForFeature(a);var d=[];d.push('<div id="pro-tab-feature-content-'+c.id+'" class="hide" >');d.push(c.detail);d.push("</div>");var b=$("#pro-tab-feature-content > div:first-child");b.prepend(d.join(""));$("#pro-tab-feature-content-"+(ec.product.setSkuId||a)).show().siblings().hide()},errorFunction:function(){$("#pro-tab-feature-content > div:first-child").html("\u6b63\u5728\u52a0\u8f7d...")}})};ec.product.rushbuyActivity=function(){rush.business.doIfSbomChanged()};rush={};rush.account={isLogin:function(){return ec.account.isLogin()},getUid:function(){return ec.account.uid}};rush.sbom={getSbom:function(a){return ec.product.getSkuInfo(a)},isRushProduct:function(){return $("#pro-tab-parameter").attr("data-skulist-rushbuy")?true:false},isRushSbom:function(a){var b=$("#pro-tab-parameter").attr("data-skulist-rushbuy");var d=","+b+",",c=","+a+",";if(d.indexOf(c)!=-1){return true}return false},getCurrSbom:function(){return ec.product.getSkuInfo(ec.product.getSku())},getCurrSkuId:function(){return ec.product.getSku()}};rush.activity={_loadStatus:0,_activityMap:{},getActivity:function(a){return rush.activity._activityMap[a]},isLoaded:function(){return rush.activity._loadStatus==1?true:false},afterLoaded:function(c){if(c.sbom.id!=rush.business.runningSkuId){return}btnStatus=rush.business.newBtnStatus("A3U3Q3S3",c.sbom.id);rush.business.displayBtnStatus(c.sbom,null,btnStatus);if(rush.activity.isLoaded()){c.doCallBack(c.sbom)}else{var b=$("#pro-tab-parameter").attr("data-skulist-rushbuy");var a=domainRush+"/getSkuRushbuyInfo.json?skuIds="+b+"&t="+new Date().getTime();$.ajax({url:a,dataType:"jsonp",timeout:10000,success:function(f){if(f){rush.business.setOffsetTime(new Date().getTime(),f.currentTime);if(f.success==true&&f.skuRushBuyInfoList){var d=f.skuRushBuyInfoList;for(var e=0;e<d.length;e++){if(d[e]&&d[e].skuId){rush.activity._activityMap[d[e].skuId]=d[e];if(d[e].startTime&&d[e].endTime){rush.activity._activityMap[d[e].skuId].startTime=new Date(d[e].startTime).format("yyyy-MM-dd HH:mm:ss");rush.activity._activityMap[d[e].skuId].endTime=new Date(d[e].endTime).format("yyyy-MM-dd HH:mm:ss")}}}rush.activity._loadStatus=1}}},complete:function(e,d){c.doCallBack(c.sbom)}})}}};rush.qualification={afterChecked:function(c){if(c.sbom.id!=rush.business.runningSkuId){return}var e,d;var a=c.act;if(!a||!a.isRushBuySku){return}if(!rush.account.isLogin()){e=0;c.doCallBack(c.sbom,c.act,e);return}activityId=a.activityId;uid=rush.account.getUid();e=ec.util.cookie.get("isqueue-"+activityId+"-"+uid);d=ec.util.cookie.get("queueSign-"+activityId+"-"+uid);if(e&&d){c.doCallBack(c.sbom,c.act,e)}else{e=0;c.doCallBack(c.sbom,c.act,e);var f=a.qids?a.qids:"0";var b=domainYY+"/ivy/isqueue.jsp?uid="+uid+"&qid="+f+"&t="+new Date().getTime();$.ajax({url:b,dataType:"jsonp",timeout:10000,jsonpCallback:"callbackqueue",success:function(g){if(g){if(g.isqueue&&g.queueSign){var h={expires:a.endTime,domain:".vmall.com"};e=g.isqueue;d=g.queueSign;if(e&&d){ec.util.cookie.set("isqueue-"+activityId+"-"+uid,e,h);ec.util.cookie.set("queueSign-"+activityId+"-"+uid,d,h);e=ec.util.cookie.get("isqueue-"+activityId+"-"+uid);d=ec.util.cookie.get("queueSign-"+activityId+"-"+uid);c.doCallBack(c.sbom,c.act,e)}}}}})}}};rush.business={offsetTime:0,setOffsetTime:function(b,a){rush.business.offsetTime=a-b},getSysDate:function(){return new Date(new Date().getTime()+rush.business.offsetTime)},timer:null,btnStatus:{},btnSt2Mode:{AXUXQXSX:1,A0UXQXSX:1,AXUXQXS2:2,A3UXQXS1:3,A1U1Q0S1:4,A1U1Q1S1:4,A1U1Q2S1:5,A2U1Q2S1:5,A1U0QXS1:6,A2U1Q0S1:7,A2U0QXS1:7,A2U1Q1S1:7,A3U3Q3S3:8},newBtnStatus:function(b,a){var c={};c.btnStatus=b;c.btnMode=rush.business.btnSt2Mode[b];c.skuId=a;return c},runningSkuId:null,doGoLogin:function(){var a=domainMain+"/account/login?url="+encodeURIComponent(window.location.pathname+"#"+rush.sbom.getCurrSkuId())+"&_t="+new Date().getTime();window.location.href=a},doGoRush:function(){var c=rush.sbom.getCurrSbom();var e={};e.mainSku=c.id;e.targetUrl=c.gotoUrl;e.backUrl=domainMain+window.location.pathname+"#"+c.id;e.accessoriesSkus="";var b=$("ul>li.selected>div.sku");if(b&&b.length>0){for(var d=0;d<b.length;d++){if(e.accessoriesSkus==""){e.accessoriesSkus=""+$(b[d]).attr("title")}else{e.accessoriesSkus+=","+$(b[d]).attr("title")}}}var a="";if(e.targetUrl&&e.mainSku&&e.mainSku.length>0){a=e.targetUrl+"?mainSku="+e.mainSku;if(e.accessoriesSkus&&e.accessoriesSkus.length>0){a+="&accessoriesSkus="+e.accessoriesSkus}if(e.backUrl&&e.backUrl.length>0){a+="&backUrl="+encodeURIComponent(e.backUrl)+""}a+="&_t="+new Date().getTime();window.location.href=a}else{return}},clickBtn:function(){if(rush.account.isLogin()){rush.business.doGoRush()}else{rush.business.doGoLogin()}},displayBtnStatus:function(e,f,d){if(e.id!=rush.business.runningSkuId){return}if(rush.business.btnStatus&&rush.business.btnStatus.btnMode==d.btnMode){return}rush.business.btnStatus=d;if(rush.business.timer){clearInterval(rush.business.timer);rush.business.timer=null}$("#pro-operation").html("");$("#pro-operation-msg").html("");var a="";switch(d.btnMode){case 1:a='<a class="button-style-disabled-1 button-event-disabled"><span>\u6682\u65f6\u7f3a\u8d27</span></a>';$("#pro-operation").html(a);$("#pro-operation").css("visibility","visible");break;case 2:a='<a class="button-style-disabled-1 button-event-disabled"><span>\u5df2\u552e\u5b8c</span></a>';$("#pro-operation").html(a);$("#pro-operation").css("visibility","visible");break;case 3:a='<a class="button-style-disabled-1 button-event-disabled"><span>\u6682\u65f6\u7f3a\u8d27</span></a>';$("#pro-operation").html(a);$("#pro-operation").css("visibility","visible");break;case 4:a='<a class="button-style-disabled-1 button-event-disabled">\u5373\u5c06\u5f00\u59cb</a></div><div id="pro-operation-countdown" class="countdown-end-area"></div>';$("#pro-operation").html(a);$("#pro-operation").css("visibility","visible");break;case 5:a='<i></i><div class="tips-text"><p><span>\u6e29\u99a8\u63d0\u793a\uff1a</span><span id="pro-msg-title">\u60a8\u4e0d\u7b26\u5408\u672c\u6b21\u8d2d\u4e70\u6761\u4ef6\u3002</span></p></div>';a='<div class="tips-style-2 tips-area" style="width:100%">'+a+"</div>";$("#pro-operation-msg").html(a);$("#pro-fixed-action-area").removeClass();$("#pro-fixed-action-area").addClass("pro-coding");break;case 6:a='<a onclick="rush.business.clickBtn()" class="button-book-2 button-style-1"  title="\u63d0\u524d\u767b\u5f55"><span>\u63d0\u524d\u767b\u5f55</span></a><div id="pro-operation-countdown" class="countdown-end-area"></div>';$("#pro-operation").html(a);$("#pro-operation").css("visibility","visible");break;case 7:a='<a onclick="rush.business.clickBtn()" class="button-book-2 button-style-1"  title="\u7acb\u5373\u7533\u8d2d"><span>\u7acb\u5373\u7533\u8d2d</span></a>';$("#pro-operation").html(a);$("#pro-operation").css("visibility","visible");break;case 8:a='<a class="button-style-disabled-1 button-event-disabled"><span>\u6b63\u5728\u52a0\u8f7d...</span></a>';$("#pro-operation").html(a);$("#pro-operation").css("visibility","visible");break;default:a='<a class="button-style-disabled-1 button-event-disabled"><span>\u6682\u65f6\u7f3a\u8d27</span></a>';$("#pro-operation").html(a);$("#pro-operation").css("visibility","visible");break}if((d.btnMode==4||d.btnMode==6)&&$("#pro-operation-countdown")&&f&&f.startTime){var g=f.startTime.parseDate("yyyy-MM-dd HH:mm:ss").format("MM\u6708dd\u65e5 HH:mm");var c=rush.business.getSysDate();ec.ui.countdown($("#pro-operation-countdown"),{html:"<s>\u5f00\u552e:	"+g+"</s><span>\u5012\u8ba1\u65f6:</span><b>{#hours}</b>\u65f6<b>{#minutes}</b>\u5206<b>{#seconds}</b>\u79d2",now:c,endTime:f.startTime,callback:function(b){d=rush.business.newBtnStatus("A2U1Q1S1",e.id);rush.business.displayBtnStatus(e,act,d)}});rush.business.timer=$($("#pro-operation-countdown")).data("countdown");if(!rush.business.timer){d=rush.business.newBtnStatus("A2U1Q1S1",e.id);rush.business.displayBtnStatus(e,act,d)}}},doIfSbomChanged:function(){var a=rush.sbom.getCurrSkuId();rush.business.runningSkuId=a;rush.business.btnStatus=null;if(ec.product.productType==4){var d=rush.sbom.getSbom(a);$("#pro-operation").html('<a target="_blank" href="'+d.gotoUrl+'" class="button-style-2 button-buy-start" title="\u53c2\u52a0\u62a2\u8d2d"><span>\u53c2\u52a0\u62a2\u8d2d</span></a>');$("#pro-operation").css("visibility","visible");return}if(!rush.sbom.isRushProduct()||!rush.sbom.isRushSbom(a)){return}if(rush.sbom.isRushProduct()&&rush.sbom.isRushSbom(a)){$("#stock-area-id").hide();$("#stock-area-id-nochange").show();$("#pro-quantity-area").show()}var b=null,c=null;b=rush.sbom.getSbom(a);if(rush.sbom.isRushProduct()){rush.activity.afterLoaded({sbom:b,doCallBack:function(f){if(f.id!=rush.business.runningSkuId){return}var e=f.id;if(rush.sbom.isRushSbom(e)){act=rush.activity.getActivity(e);if(f&&act&&act.isRushBuySku){rush.qualification.afterChecked({sbom:f,act:act,doCallBack:function(i,g,j){if(i.id!=rush.business.runningSkuId){return}var h=rush.business.calculateBtnStatus(i,g,j);rush.business.displayBtnStatus(i,g,h)}})}else{btnStatus=rush.business.newBtnStatus("AXUXQXSX",f.id);rush.business.displayBtnStatus(f,act,btnStatus);return}}else{return}}})}else{return}},calculateBtnStatus:function(d,a,h){var c="AXUXQXSX";var g=new Date(),e=new Date(),b=new Date();try{g=rush.business.getSysDate();e.setTime(a.startTime.parseDate("yyyy-MM-dd HH:mm:ss"));b.setTime(a.endTime.parseDate("yyyy-MM-dd HH:mm:ss"))}catch(f){c="AXUXQXSX";return rush.business.newBtnStatus(c,d.id)}if(g>b){if(a.skuStatus==0){c="AXUXQXS2";return rush.business.newBtnStatus(c,d.id)}c="A3UXQXS1";return rush.business.newBtnStatus(c,d.id)}if(!a.qids||a.qids=="0"){result=1}else{if(h==2){result=2}else{if(h==1){result=1}else{result=0}}}if(g<e){if(rush.account.isLogin()){switch(result){case 1:c="A1U1Q1S1";break;case 2:c="A1U1Q2S1";break;default:c="A1U1Q0S1"}}else{c="A1U0QXS1"}return rush.business.newBtnStatus(c,d.id)}if(g>=e){if(a.skuStatus==0){c="AXUXQXS2";return rush.business.newBtnStatus(c,d.id)}if(rush.account.isLogin()){switch(result){case 1:c="A2U1Q1S1";break;case 2:c="A2U1Q2S1";break;default:c="A2U1Q0S1"}}else{c="A2U0QXS1"}return rush.business.newBtnStatus(c,d.id)}}};
